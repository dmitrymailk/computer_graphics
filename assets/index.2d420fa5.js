var I=Object.defineProperty;var K=(h,t,s)=>t in h?I(h,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[t]=s;var l=(h,t,s)=>(K(h,typeof t!="symbol"?t+"":t,s),s);import{d as j,c as N,u as R,R as z,o as f,a as m,b as u,e as Y,w as S,r as P,f as x,P as y,V as D,g as O,F,h as M,i as U,t as Z,j as q,k as W,l as T}from"./vendor.652083ab.js";const H=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}};H();const V=j({setup(h){return(t,s)=>(f(),N(R(z)))}});var X=(h,t)=>{const s=h.__vccOpts||h;for(const[e,o]of t)s[e]=o;return s};const Q={},G={class:"container mt-4"},J=u("h2",null,"\u0421\u043F\u0438\u0441\u043E\u043A \u043B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u044B\u0445",-1),tt={class:"list-group"},st=x("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 1"),et=x("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 2"),at=x("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 3"),ot=x("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 4"),nt=x("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 5");function it(h,t){const s=P("router-link");return f(),m("div",G,[J,u("ul",tt,[Y(s,{class:"list-group-item text-center w-25",to:"/lab_1"},{default:S(()=>[st]),_:1}),Y(s,{class:"list-group-item text-center w-25",to:"/lab_2"},{default:S(()=>[et]),_:1}),Y(s,{class:"list-group-item text-center w-25",to:"/lab_3"},{default:S(()=>[at]),_:1}),Y(s,{class:"list-group-item text-center w-25",to:"/lab_4"},{default:S(()=>[ot]),_:1}),Y(s,{class:"list-group-item text-center w-25",to:"/lab_5"},{default:S(()=>[nt]),_:1})])])}var rt=X(Q,[["render",it]]);class n{constructor(t=0,s=0,e=0){l(this,"x",0);l(this,"y",0);l(this,"z",0);this.x=t,this.y=s,this.z=e}norm2(){let{x:t,y:s,z:e}=this;return Math.sqrt(t*t+s*s+e*e)}static mul(t,s){const{x:e,y:o,z:a}=t;return new n(e*s,o*s,a*s)}static lepr(t,s,e){const o=n.mul(t,-1);let a=n.add(s,o);return a=n.mul(a,e),n.add(t,a)}add(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}static add(t,s){return new n(t.x+s.x,t.y+s.y,t.z+s.z)}static matMul(t,s){let e=new n,o=0,a=0,r=0,i=[s.x,s.y,s.z],c=[t[0].toArray(),t[1].toArray(),t[2].toArray()];for(let d=0;d<3;d++)o+=c[0][d]*i[d],a+=c[1][d]*i[d],r+=c[2][d]*i[d];return e.x=o,e.y=a,e.z=r,e}toString(){const{x:t,y:s,z:e}=this;return`x=${t} y=${s} z=${e}`}toArray(){return[this.x,this.y,this.z]}}class C{constructor(t,s=600,e=600){l(this,"canvas");l(this,"ctx");l(this,"width",600);l(this,"height",600);l(this,"_color","#000000");this.canvas=t,this.width=s,this.height=e,this.setupCanvasElement(),this.setupCtx()}setupCanvasElement(){this.canvas.width=this.width,this.canvas.height=this.height}setupCtx(){const t=this.canvas.getContext("2d");t&&(this.ctx=t,this.ctx.font="18px serif"),this.ctx.imageSmoothingEnabled=!1}setPoint(t,s,e=1){this.ctx.fillRect(t,s,e,e)}drawLine(t,s,e,o){const a=this.ctx;a.beginPath(),a.moveTo(t,s),a.lineTo(e,o),a.stroke()}set color(t){this._color=t,this.ctx.fillStyle=t}get color(){return this._color}clear(){this.ctx.clearRect(0,0,this.width,this.height)}on(t,s){this.canvas.addEventListener(t,s)}}function B(h,t){return Math.random()*(t-h)+h}function k(h,t,s){let e=new Blob([h],{type:s}),o=window.URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.download=t,a.click(),window.URL.revokeObjectURL(o),a.remove()}function v(h){let t=1;if(h==0||h==1)return t;for(var s=h;s>=1;s--)t=t*s;return t}class lt{constructor(t){l(this,"canvas");l(this,"coords",[]);l(this,"projectedCoords",[]);l(this,"angleZ",0);l(this,"angleX",0);l(this,"angleY",0);l(this,"scaleX",600);l(this,"scaleY",600);l(this,"scaleZ",600);l(this,"maxScale",600);l(this,"projection",[]);l(this,"rotationZ",[]);l(this,"rotationX",[]);l(this,"rotationY",[]);l(this,"translation",new n);l(this,"translationX",0);l(this,"translationY",0);l(this,"translationZ",0);this.canvas=t,this.scaleX=this.canvas.width,this.scaleY=this.canvas.height,this.scaleZ=this.canvas.width,this.init()}addCoords(t){for(let s=1;s<t.length;s++)this.coords.push(new n(Number(t[s][0]),Number(t[s][1]),Number(t[s][2])))}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(t){const s="#000000";this.canvas.color=s,this.coords=[],this.projectedCoords=[],t?(this.addCoords(t),this.startUpdate()):this.canvas.on("click",e=>{const o=e.offsetX,a=e.offsetY;this.canvas.setPoint(o,a,2);const r=o/this.canvas.width-.5,i=a/this.canvas.height-.5,c=B(-.2,.2);this.coords.push(new n(r,i,c))}),window.addEventListener("keydown",e=>{this.keyboardEvent(e)}),this.startUpdate()}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.updateRotation(),this.updateProjection(),this.projectedCoords=[];let t=new n(0,0,0);for(let s=0;s<this.coords.length;s++){let e=this.coords[s];t.add(e)}t=n.mul(t,1/this.coords.length);for(let s of this.coords){let e=new n(s.x,s.y,s.z);new n(this.translationX,this.translationY,this.translationZ);let o=new n(this.translationX,this.translationY,this.translationZ);e=n.add(e,n.mul(t,-1)),e=n.matMul(this.rotationX,e),e=n.matMul(this.rotationZ,e),e=n.matMul(this.rotationY,e),e=n.add(e,t),e=n.matMul(this.projection,e),e=n.add(e,o),this.projectedCoords.push(e);let a=this.convertCoords(e.x,e.y);this.canvas.setPoint(a.x,a.y)}for(let s=0;s<this.projectedCoords.length-1;s++)this.connectProjectedDots(s,s+1)}convertCoords(t,s){return t+=this.canvas.width/2,s+=this.canvas.height/2,new n(t,s,0)}updateRotation(){const t=this.angleX,s=this.angleY,e=this.angleZ;this.rotationZ=[],this.rotationZ.push(new n(Math.cos(e),-Math.sin(e),0)),this.rotationZ.push(new n(Math.sin(e),Math.cos(e),0)),this.rotationZ.push(new n(0,0,1)),this.rotationX=[],this.rotationX.push(new n(1,0,0)),this.rotationX.push(new n(0,Math.cos(t),-Math.sin(t))),this.rotationX.push(new n(0,Math.sin(t),Math.cos(t))),this.rotationY=[],this.rotationY.push(new n(Math.cos(s),0,Math.sin(s))),this.rotationY.push(new n(0,1,0)),this.rotationY.push(new n(-Math.sin(s),0,Math.cos(s)))}updateProjection(){const t=this.scaleX,s=this.scaleY,e=this.scaleZ;this.projection=[],this.projection.push(n.mul(new n(1,0,0),t)),this.projection.push(n.mul(new n(0,1,0),s)),this.projection.push(n.mul(new n(0,0,1),e))}keyboardEvent(t){switch(t.code){case"KeyZ":{this.angleZ+=.1;break}case"KeyX":{this.angleX+=.1;break}case"KeyY":{this.angleY+=.1;break}case"KeyQ":{this.translationX+=10;break}case"KeyW":{this.translationY+=10;break}case"KeyE":{this.translationZ+=10;break}case"KeyA":{this.scaleX+=1;break}case"KeyS":{this.scaleY+=1;break}case"KeyD":{this.scaleZ+=1;break}}}clearScreen(){this.canvas.clear()}clearCoords(){this.coords=[],this.angleX=0,this.angleY=0,this.angleZ=0,this.translationX=0,this.translationY=0,this.translationZ=0,this.scaleX=this.canvas.width,this.scaleY=this.canvas.width,this.scaleZ=this.canvas.width,this.clearScreen()}connectProjectedDots(t,s){let e=this.projectedCoords[t],o=this.projectedCoords[s];e=this.convertCoords(e.x,e.y),o=this.convertCoords(o.x,o.y),this.canvas.drawLine(e.x,e.y,o.x,o.y)}changeScale(t,s){switch(t){case"X":{this.scaleX=this.maxScale*(s/100);break}case"Y":{this.scaleY=this.maxScale*(s/100);break}case"Z":{this.scaleZ=this.maxScale*(s/100);break}case"XYZ":this.scaleX=this.maxScale*(s/100),this.scaleY=this.maxScale*(s/100),this.scaleZ=this.maxScale*(s/100)}}saveFigure(){let t=y.unparse(this.coords);k(t,"figure.csv","text/csv")}loadFigure(t){var o;const s=(o=t.target)==null?void 0:o.files[0],e=new FileReader;e.addEventListener("load",a=>{const r=a.currentTarget.result;let i=y.parse(r);i=i.data,this.addCoords(i)}),e.readAsText(s)}}const ut={data(){return{test:123,lab1:null}},components:{VueMarkdown:D},methods:{clearScreen(){this.lab1.clearCoords()},changeScale(h,t){console.log(h);const s=h.srcElement.value;this.lab1.changeScale(t,s)},saveFigure(){this.lab1.saveFigure()},loadFigure(h){this.lab1.loadFigure(h)}},setup(h,t){return{src:O(`## \u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21161
    1. \u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u043C\u043A\u043D\u0443\u0442\u043E\u0439 \u043B\u043E\u043C\u0430\u043D\u043E\u0439 \u043F\u043E \u0442\u043E\u0447\u043A\u0430\u043C, \u0437\u0430\u0434\u0430\u043D\u043D\u044B\u043C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u043C.
    2. \u041F\u043E\u0432\u043E\u0440\u043E\u0442, \u0441\u0434\u0432\u0438\u0433, \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435, \u0441\u0436\u0430\u0442\u0438\u0435. 
    3. \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445 \u0432 \u0444\u0430\u0439\u043B.
    4. \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043A\u0440\u0438\u0432\u043E\u0439 \u0438\u0437 \u0444\u0430\u0439\u043B\u0430.`)}},mounted(){const h=this.$refs.canvas_elem,t=new C(h),s=new lt(t);this.lab1=s}},ct={class:"lab_1"},ht={class:"lab_1__title"},dt={class:"lab_1__field"},_t={class:"lab_1__canvas",ref:"canvas_elem"},pt={class:"lab_1__controls"},gt={class:"my-3"},ft=u("label",{for:"formFile",class:"form-label"},"Load figure",-1),mt={class:"lab_1__range"},vt=u("label",{for:"scaleXYZ",class:"form-label"},"scaleXYZ",-1),wt={class:"lab_1__range"},bt=u("label",{for:"scaleX",class:"form-label"},"scaleX",-1),Ct={class:"lab_1__range"},yt=u("label",{for:"scaleY",class:"form-label"},"scaleY",-1),xt={class:"lab_1__range"},Yt=u("label",{for:"scaleZ",class:"form-label"},"scaleZ",-1);function Xt(h,t,s,e,o,a){const r=P("vue-markdown");return f(),m("div",ct,[u("div",ht,[Y(r,{source:e.src},null,8,["source"])]),u("div",dt,[u("canvas",_t,null,512)]),u("div",pt,[u("button",{onClick:t[0]||(t[0]=(...i)=>a.clearScreen&&a.clearScreen(...i)),class:"btn btn-primary me-2"}," Clear Screen "),u("button",{onClick:t[1]||(t[1]=(...i)=>a.saveFigure&&a.saveFigure(...i)),class:"btn btn-primary"},"Save Figure"),u("div",gt,[ft,u("input",{class:"form-control",type:"file",id:"formFile",onChange:t[2]||(t[2]=(...i)=>a.loadFigure&&a.loadFigure(...i))},null,32)]),u("div",mt,[vt,u("input",{type:"range",name:"scaleXYZ",min:"1",max:"100",onInput:t[3]||(t[3]=i=>a.changeScale(i,"XYZ")),class:"form-range"},null,32)]),u("div",wt,[bt,u("input",{type:"range",name:"scaleX",min:"1",max:"100",onInput:t[4]||(t[4]=i=>a.changeScale(i,"X")),class:"form-range"},null,32)]),u("div",Ct,[yt,u("input",{type:"range",name:"scaleY",min:"1",max:"100",onChange:t[5]||(t[5]=i=>a.changeScale(i,"Y")),class:"form-range"},null,32)]),u("div",xt,[Yt,u("input",{type:"range",name:"scaleZ",min:"1",max:"100",onChange:t[6]||(t[6]=i=>a.changeScale(i,"Z")),class:"form-range"},null,32)])])])}var St=X(ut,[["render",Xt]]);class Zt{constructor(t,s){l(this,"canvas");l(this,"coords_2_2",[]);l(this,"isDrawCurve",!1);l(this,"vueComponent",null);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_2_2.push(new n(s,e,0)),this.vueComponent.coords_2_2.push([s,e])}),this.startUpdate()}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_2_2.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.drawCurve()}setPoints(){for(let t of this.coords_2_2)this.canvas.setPoint(t.x,t.y,1)}changeCoordsPos(t,s,e){this.coords_2_2[t][s]=Number(e)}drawCurve(){if(this.coords_2_2.length>=3){const t=[];for(let r=0;r<1.0001;r+=.01){let i=this.coords_2_2.slice();const c=i.shift(),d=i.shift();for(i.unshift(c),i.push(d);i.length!=1;){i=this.dublicate(i);for(let _=0;_<i.length;_++){const p=i.shift(),g=i.shift(),w=n.lepr(p,g,r);i.push(w)}}t.push(i[0])}for(let r=0;r<t.length-1;r++){const i=t[r],c=t[r+1];this.canvas.drawLine(i.x,i.y,c.x,c.y)}let e=this.coords_2_2.slice();const o=e.shift(),a=e.shift();e.unshift(o),e.push(a);for(let r=0;r<e.length-1;r++){const i=e[r],c=e[r+1];this.canvas.drawLine(i.x,i.y,c.x,c.y)}}}dublicate(t){let s=t.slice(),e=[];e.push(s.slice(0,1)[0]);for(let o=1;o<s.length-1;o++)e.push(s.slice(o,o+1)[0]),e.push(s.slice(o,o+1)[0]);return e.push(s.slice(s.length-1)[0]),e}setDrawCurve(){console.log("draw curve"),this.coords_2_2.length>=3&&(this.isDrawCurve=!0)}clearScreen(){this.canvas.clear()}}class kt{constructor(t,s){l(this,"canvas");l(this,"coords_2_1",[]);l(this,"vueComponent",null);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_2_1.push(new n(s,e,0)),this.vueComponent.coords_2_1.push([s,e])}),this.startUpdate()}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_2_1.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.drawCurve()}setPoints(){for(let t of this.coords_2_1)this.canvas.setPoint(t.x,t.y,3)}changeCoordsPos(t,s,e){this.coords_2_1[t][s]=Number(e)}drawCurve(){if(this.coords_2_1.length>=3){let t=[],s=.01;const e=this.coords_2_1.length-1,o=v(e);let a=this.coords_2_1.slice();for(let r=s;r<1;r+=s){let i=new n(0,0,0);for(let c=0;c<=e;c++){let d=new n(a[c].x,a[c].y,0),_=o/(v(c)*v(e-c)),p=Math.pow(1-r,e-c),g=Math.pow(r,c);d=n.mul(d,_*p*g),i.add(d)}t.push(i)}for(let r=0;r<t.length-1;r++){const i=t[r],c=t[r+1];this.canvas.drawLine(i.x,i.y,c.x,c.y)}for(let r=0;r<a.length-1;r++){const i=a[r],c=a[r+1];this.canvas.drawLine(i.x,i.y,c.x,c.y)}}}clearScreen(){this.canvas.clear()}}class Et{constructor(t,s){l(this,"canvas");l(this,"coords_2_3",[]);l(this,"vueComponent",null);l(this,"partsIsOn",!0);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_2_3.push(new n(s,e,0)),this.vueComponent.coords_2_3.push([s,e])}),this.startUpdate()}setPartsIsOn(){this.partsIsOn=!this.partsIsOn}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_2_3.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.drawCurve()}setPoints(){for(let t of this.coords_2_3)this.canvas.setPoint(t.x,t.y,3)}changeCoordsPos(t,s,e){this.coords_2_3[t][s]=Number(e)}drawCurve(){if(this.coords_2_3.length>=3){let t=[],s=.01,e=this.coords_2_3.slice();if(this.partsIsOn){let r=[];const i=e.length;for(let c=0;c<i;c++)if(r.push(e[c]),c<i-1){let d=e[c],_=e[c+1],p=n.add(d,_);p=n.mul(p,.5),r.push(p)}e=r.slice()}for(let r=0;r<e.length;r++)this.canvas.setPoint(e[r].x,e[r].y,4);const o=3-1,a=v(o);for(let r=1;r<e.length-o;r+=o)for(let i=s;i<1;i+=s){let c=new n(0,0,0);for(let d=0;d<=o;d++){let _=new n(e[r+d].x,e[r+d].y,0),p=a/(v(d)*v(o-d)),g=Math.pow(1-i,o-d),w=Math.pow(i,d);_=n.mul(_,p*g*w),c.add(_)}t.push(c)}for(let r=0;r<t.length-1;r++){const i=t[r];this.canvas.setPoint(i.x,i.y);const c=t[r+1];this.canvas.drawLine(i.x,i.y,c.x,c.y)}}}clearScreen(){this.canvas.clear()}}class Ft{constructor(t,s){l(this,"canvas");l(this,"coords_2_4",[]);l(this,"vueComponent",null);l(this,"partsIsOn",!0);l(this,"weights",[]);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_2_4.push(new n(s,e,0)),this.vueComponent.coords_2_4.push([s,e]),this.weights.push(1)}),this.startUpdate()}setPartsIsOn(){this.partsIsOn=!this.partsIsOn}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_2_4.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.drawCurve()}setPoints(){for(let t of this.coords_2_4)this.canvas.setPoint(t.x,t.y,3)}B(t,s,e,o){let a=e/(v(s)*v(o-s)),r=Math.pow(1-t,o-s),i=Math.pow(t,s);return a*r*i}Sigma(t,s,e){let o=0;for(let a=0;a<this.coords_2_4.length;a++)o+=this.B(t,a,s,e)*this.weights[a];return o}R(t,s,e,o){const a=this.B(t,s,e,o)*this.weights[s],r=this.Sigma(t,e,o);return a/r}drawCurve(){if(this.coords_2_4.length>=3){let t=[],s=.01;const e=this.coords_2_4.length-1,o=v(e);let a=this.coords_2_4.slice();console.log(this.weights);for(let r=0;r<=1+s;r+=s){let i=new n(0,0,0);for(let c=0;c<=e;c++){let d=new n(a[c].x,a[c].y,0);const _=this.R(r,c,o,e);d=n.mul(d,_),i.add(d)}t.push(i)}for(let r=0;r<t.length-1;r++){const i=t[r],c=t[r+1];this.canvas.drawLine(i.x,i.y,c.x,c.y)}}}changeWeights(t,s){this.weights[t]=1+10*(Number(s)/100)}clearScreen(){this.canvas.clear()}}const Mt=j({data(){return{lab_2_1:null,coords_2_1:[],lab_2_2:null,coords_2_2:[],lab_2_3:null,coords_2_3:[],lab_2_4:null,coords_2_4:[]}},components:{VueMarkdown:D},methods:{setDrawCurve(){this.lab.setDrawCurve()},changeCoordsPos_2_2(h,t,s){let e=h.srcElement.value;this.lab_2_2.changeCoordsPos(s,t,e)},changeCoordsPos_2_1(h,t,s){let e=h.srcElement.value;this.lab_2_1.changeCoordsPos(s,t,e)},changeWeights_2_4(h,t){let s=h.srcElement.value;this.lab_2_4.changeWeights(t,s)},setPartsIsOn(){this.lab_2_3.setPartsIsOn()}},mounted(){const h=this.$refs.canvas_elem_2_2,t=new C(h),s=new Zt(t,this);this.lab_2_2=s;const e=this.$refs.canvas_elem_2_1,o=new C(e),a=new kt(o,this);this.lab_2_1=a;const r=this.$refs.canvas_elem_2_3,i=new C(r),c=new Et(i,this);this.lab_2_3=c;const d=this.$refs.canvas_elem_2_4,_=new C(d),p=new Ft(_,this);this.lab_2_4=p}}),jt={class:"container"},Dt=U('<div class="p-2"><h3>\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21162</h3> 2. \u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u043A\u0440\u0438\u0432\u043E\u0439 \u0411\u0435\u0437\u044C\u0435 <ul><li><a target="_blank" href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Explicit_definition">2.1 \u043E\u0431\u044B\u0447\u043D\u044B\u0439 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C (4)</a></li><li><a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Quadratic_B%C3%A9zier_curves" target="_blank">2.2 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C \u0434\u0435 \u041A\u0430\u0441\u0442\u0435\u043B\u044C\u043E (4)</a></li><li><a href="https://en.wikipedia.org/wiki/Composite_B%C3%A9zier_curve" target="_blank">2.3 \u0441\u043E\u0441\u0442\u0430\u0432\u043D\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F (3)</a></li><li><a href="https://pages.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/NURBS/RB.html" target="_blank"> 2.4 \u0440\u0430\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F \u0411\u0435\u0437\u044C\u0435 (3) </a></li></ul></div>',1),$t={class:"container"},Pt=u("h3",null,"2.1 \u043E\u0431\u044B\u0447\u043D\u044B\u0439 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C (4)",-1),Bt={class:"lab_2__canvas",ref:"canvas_elem_2_1"},At=u("br",null,null,-1),Lt={class:"card-body"},It={class:"card-title"},Kt=u("label",{for:"x",class:"form-label"},"x",-1),Nt=["onInput"],Rt=u("label",{for:"y",class:"form-label"},"y",-1),zt=["onInput"],Ot=u("hr",null,null,-1),Ut={class:"container"},qt=u("h3",null,"2.2 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C \u0434\u0435 \u041A\u0430\u0441\u0442\u0435\u043B\u044C\u043E (4)",-1),Wt={class:"lab_2__canvas",ref:"canvas_elem_2_2"},Tt=u("br",null,null,-1),Ht={class:"card-body",key:"item"},Vt={class:"card-title"},Qt=u("label",{for:"x",class:"form-label"},"x",-1),Gt=["onInput"],Jt=u("label",{for:"y",class:"form-label"},"y",-1),ts=["onInput"],ss=u("hr",null,null,-1),es={class:"container"},as=u("h3",null,"2.3 \u0441\u043E\u0441\u0442\u0430\u0432\u043D\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F",-1),os={class:"lab_2__canvas",ref:"canvas_elem_2_3"},ns=u("br",null,null,-1),is={class:"container"},rs=u("h3",null,"2.4 \u0440\u0430\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F \u0411\u0435\u0437\u044C\u0435",-1),ls={class:"lab_2__canvas",ref:"canvas_elem_2_4"},us=u("br",null,null,-1),cs={class:"card-body",key:"item"},hs={class:"card-title"},ds=u("label",{for:"weight",class:"form-label"},"weight",-1),_s=["onInput"];function ps(h,t,s,e,o,a){return f(),m("div",jt,[Dt,u("div",$t,[Pt,u("canvas",Bt,null,512),At,(f(!0),m(F,null,M(h.coords_2_1,(r,i)=>(f(),m("div",{class:"card mt-2",key:r},[u("div",Lt,[u("h5",It,"Point "+Z(i),1),Kt,u("input",{type:"range",name:"x",min:"1",max:"600",onInput:c=>h.changeCoordsPos_2_1(c,"x",i),class:"form-range"},null,40,Nt),Rt,u("input",{type:"range",name:"y",min:"1",max:"600",onInput:c=>h.changeCoordsPos_2_1(c,"y",i),class:"form-range"},null,40,zt)])]))),128)),Ot]),u("div",Ut,[qt,u("canvas",Wt,null,512),Tt,(f(!0),m(F,null,M(h.coords_2_2,(r,i)=>(f(),m("div",{class:"card mt-2",key:r},[u("div",Ht,[u("h5",Vt,"Point "+Z(i),1),Qt,u("input",{type:"range",name:"x",min:"1",max:"600",onInput:c=>h.changeCoordsPos_2_2(c,"x",i),class:"form-range"},null,40,Gt),Jt,u("input",{type:"range",name:"y",min:"1",max:"600",onInput:c=>h.changeCoordsPos_2_2(c,"y",i),class:"form-range"},null,40,ts)])]))),128)),ss]),u("div",es,[as,u("canvas",os,null,512),ns,u("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...r)=>h.setPartsIsOn&&h.setPartsIsOn(...r))}," Turn off parts ")]),u("div",is,[rs,u("canvas",ls,null,512),us,(f(!0),m(F,null,M(h.coords_2_4,(r,i)=>(f(),m("div",{class:"card mt-2",key:r},[u("div",cs,[u("h5",hs,"Point weight "+Z(i),1),ds,u("input",{type:"range",name:"weight",min:"1",max:"100",onInput:c=>h.changeWeights_2_4(c,i),class:"form-range"},null,40,_s)])]))),128))])])}var gs=X(Mt,[["render",ps]]);function fs(h,t,s,e,o){let a,r,i,c,d=s.length,_=s[0].length;if(t<1)throw new Error("degree must be at least 1 (linear)");if(t>d-1)throw new Error("degree must be less than or equal to point count - 1");if(!o)for(o=[],a=0;a<d;a++)o[a]=1;if(e){if(e.length!==d+t+1)throw new Error("bad knot vector length")}else{let L=[];for(a=0;a<d+t+1;a++)L[a]=a}let p=[t,e.length-1-t],g=e[p[0]],w=e[p[1]];if(h=h*(w-g)+g,h<g||h>w)throw new Error("out of bounds");for(i=p[0];i<p[1]&&!(h>=e[i]&&h<=e[i+1]);i++);console.log(i);let b=[];for(a=0;a<d;a++){for(b[a]=[],r=0;r<_;r++)b[a][r]=s[a][r]*o[a];b[a][_]=o[a]}let E;for(c=1;c<=t+1;c++)for(a=i;a>i-t-1+c;a--)for(E=(h-e[a])/(e[a+t+1-c]-e[a]),r=0;r<_+1;r++)b[a][r]=(1-E)*b[a-1][r]+E*b[a][r];let $=[];for(a=0;a<_;a++)$[a]=b[i][a]/b[i][_];return $}class ms{constructor(t,s){l(this,"canvas");l(this,"coords_3_1",[]);l(this,"vueComponent",null);l(this,"knots",[]);l(this,"degree",2);l(this,"precision",1/100);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_3_1.push(new n(s,e,0)),this.vueComponent.pointsAmount+=1}),this.startUpdate()}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_3_1.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.coords_3_1.length>2&&this.drawB_Spline()}setPoints(){for(let t of this.coords_3_1)this.canvas.setPoint(t.x,t.y,2)}debug_func(){this.drawB_Spline()}setDegree(t){t<=2?this.degree=2:t<this.coords_3_1.length-1?this.degree=t:this.degree=this.coords_3_1.length-1}drawB_Spline(){const t=this.precision;let s=[],e=[];for(let d=0;d<this.coords_3_1.length;d++)e.push([this.coords_3_1[d].x,this.coords_3_1[d].y]);const o=this.degree;let a=[];const i=this.coords_3_1.length+o+1;for(let d=0;d<i;d++)d<=o?a.push(0):d<i-o-1?a.push(d/i):a.push(1);this.knots=a;let c=this.coords_3_1.length;for(let d=0;d<=1;d+=t){let _=0,p=0;for(let g=0;g<c;g++){let w=this.N(g,o,d);_+=w*this.coords_3_1[g].x,p+=w*this.coords_3_1[g].y}s.push([_,p])}for(let d=0;d<s.length-1;d++){const _=s[d],p=s[d+1];this.canvas.drawLine(_[0],_[1],p[0],p[1])}this.canvas.drawLine(s[s.length-1][0],s[s.length-1][1],this.coords_3_1[this.coords_3_1.length-1].x,this.coords_3_1[this.coords_3_1.length-1].y)}drawB_Spline_2(){let s=[],e=[];for(let c=0;c<this.coords_3_1.length;c++)e.push([this.coords_3_1[c].x,this.coords_3_1[c].y]);const o=2;let a=[];const r=this.coords_3_1.length+o+1;let i=0;for(let c=0;c<r;c++)c<o-1?a.push(i):c<r-o?(a.push(i/o),i=1):a.push(i/o);for(let c=0;c<1;c+=1/100){let d=fs(c,o,e,a);console.log(d),s.push(d)}for(let c=0;c<s.length-1;c++){const d=s[c],_=s[c+1];this.canvas.drawLine(d[0],d[1],_[0],_[1])}}clearScreen(){this.canvas.clear()}N(t,s,e){if(s==0)return this.knots[t]<=e&&e<=this.knots[t+1]?1:0;let o;this.knots[t+s]==this.knots[t]?e==this.knots[t]?o=0:o=1:o=(e-this.knots[t])/(this.knots[t+s]-this.knots[t]);let a;return this.knots[t+s+1]==this.knots[t+1]?this.knots[t+s+1]==e?a=0:a=1:a=(this.knots[t+s+1]-e)/(this.knots[t+s+1]-this.knots[t+1]),o*this.N(t,s-1,e)+a*this.N(t+1,s-1,e)}}const vs=j({data(){return{lab_3_1:null,pointsAmount:0}},components:{VueMarkdown:D},methods:{setDegree(h){if(h.data&&!isNaN(h.data)){let t=Number(h.data);this.lab_3_1.setDegree(t)}}},mounted(){const h=this.$refs.canvas_elem_3_1,t=new C(h),s=new ms(t,this);this.lab_3_1=s}}),ws={class:"container"},bs=u("div",{class:"p-2"},[u("h3",null,"\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21163"),x(" 3. \u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u043F\u043B\u0430\u0439\u043D\u043E\u0432\u044B\u0445 \u043A\u0440\u0438\u0432\u044B\u0445 "),u("ul",null,[u("li",null,"\u0441\u043F\u043B\u0430\u0439\u043D\u043E\u0432\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F 2-\u0433\u043E \u043F\u043E\u0440\u044F\u0434\u043A\u0430 (4)"),u("li",null,"\u0441\u043F\u043B\u0430\u0439\u043D\u043E\u0432\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F 3-\u0433\u043E \u043F\u043E\u0440\u044F\u0434\u043A\u0430 (4)"),u("li",null,"\u0441\u043F\u043B\u0430\u0439\u043D\u043E\u0432\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F \u043F\u0440\u043E\u0438\u0437\u0432\u043E\u043B\u044C\u043D\u043E\u0433\u043E \u043F\u043E\u0440\u044F\u0434\u043A\u0430 (6)")])],-1),Cs={class:"container"},ys=u("h3",null,"2.1 \u043E\u0431\u044B\u0447\u043D\u044B\u0439 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C (4)",-1),xs={class:"lab_3__canvas",ref:"canvas_elem_3_1"},Ys=u("br",null,null,-1),Xs={class:"input-group mt-3 w-50 mb-5"},Ss=u("span",{class:"input-group-text"},"B-spline degree",-1);function Zs(h,t,s,e,o,a){return f(),m("div",ws,[bs,u("div",Cs,[ys,u("canvas",xs,null,512),Ys,u("h4",null,"Points amount: "+Z(h.pointsAmount),1),u("div",Xs,[Ss,u("input",{type:"text",class:"form-control",value:"2",onInput:t[0]||(t[0]=(...r)=>h.setDegree&&h.setDegree(...r))},null,32)])])])}var ks=X(vs,[["render",Zs]]);class Es{constructor(t){l(this,"canvas");l(this,"originalCoords",[]);l(this,"transformedCoords",[]);l(this,"projectedCoords",[]);l(this,"traversalIndexes",[]);l(this,"angleZ",0);l(this,"angleX",0);l(this,"angleY",0);l(this,"scaleX",150);l(this,"scaleY",150);l(this,"scaleZ",150);l(this,"maxScale",600);l(this,"projection",[]);l(this,"rotationZ",[]);l(this,"rotationX",[]);l(this,"rotationY",[]);l(this,"translation",new n);l(this,"translationX",0);l(this,"translationY",0);l(this,"translationZ",0);this.canvas=t,this.init()}addCoords(t){for(let s=1;s<t.length;s++)this.originalCoords.push(new n(Number(t[s][0]),Number(t[s][1]),Number(t[s][2])))}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(t){const s="#000000";this.canvas.color=s,this.originalCoords=[],this.projectedCoords=[],t?(this.addCoords(t),this.startUpdate()):this.addCoordsManually(),window.addEventListener("keydown",e=>{this.keyboardEvent(e)}),this.startUpdate()}addCoordsManually(){let t=[[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.25,-.25,-.25]];for(const e of t)this.originalCoords.push(new n(e[0],e[1],e[2]));const s=[[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7],[0,8],[8,1]];this.traversalIndexes=s}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.originalCoords.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.updateRotation(),this.updateProjection(),this.projectedCoords=[];let t=new n(0,0,0);for(let e=0;e<this.originalCoords.length;e++){let o=this.originalCoords[e];t.add(o)}t=n.mul(t,1/this.originalCoords.length);let s=0;for(let e of this.originalCoords){let o=new n(e.x,e.y,e.z);new n(this.translationX,this.translationY,this.translationZ);let a=new n(this.translationX,this.translationY,this.translationZ);o=n.add(o,n.mul(t,-1)),o=n.matMul(this.rotationX,o),o=n.matMul(this.rotationZ,o),o=n.matMul(this.rotationY,o),o=n.add(o,t),o=n.matMul(this.projection,o),o=n.add(o,a),this.projectedCoords.push(o);let r=this.convertCoords(o.x,o.y);this.canvas.ctx.fillText(`${s}`,r.x,r.y),this.canvas.setPoint(r.x,r.y),s+=1}for(const e of this.traversalIndexes)this.connectProjectedDots(e[0],e[1]);this.angleZ+=.001,this.angleY+=.003,this.angleX+=.001}convertCoords(t,s){return t+=this.canvas.width/2,s+=this.canvas.height/2,new n(t,s,0)}updateRotation(){const t=this.angleX,s=this.angleY,e=this.angleZ;this.rotationZ=[],this.rotationZ.push(new n(Math.cos(e),-Math.sin(e),0)),this.rotationZ.push(new n(Math.sin(e),Math.cos(e),0)),this.rotationZ.push(new n(0,0,1)),this.rotationX=[],this.rotationX.push(new n(1,0,0)),this.rotationX.push(new n(0,Math.cos(t),-Math.sin(t))),this.rotationX.push(new n(0,Math.sin(t),Math.cos(t))),this.rotationY=[],this.rotationY.push(new n(Math.cos(s),0,Math.sin(s))),this.rotationY.push(new n(0,1,0)),this.rotationY.push(new n(-Math.sin(s),0,Math.cos(s)))}updateProjection(){const t=this.scaleX,s=this.scaleY,e=this.scaleZ;this.projection=[],this.projection.push(n.mul(new n(1,0,0),t)),this.projection.push(n.mul(new n(0,1,0),s)),this.projection.push(n.mul(new n(0,0,1),e))}keyboardEvent(t){switch(t.code){case"KeyZ":{this.angleZ+=.1;break}case"KeyX":{this.angleX+=.1;break}case"KeyY":{this.angleY+=.1;break}case"KeyQ":{this.translationX+=10;break}case"KeyW":{this.translationY+=10;break}case"KeyE":{this.translationZ+=10;break}case"KeyA":{this.scaleX+=1;break}case"KeyS":{this.scaleY+=1;break}case"KeyD":{this.scaleZ+=1;break}}}clearScreen(){this.canvas.clear()}clearCoords(){this.originalCoords=[],this.angleX=0,this.angleY=0,this.angleZ=0,this.translationX=0,this.translationY=0,this.translationZ=0,this.scaleX=this.canvas.width,this.scaleY=this.canvas.width,this.scaleZ=this.canvas.width,this.clearScreen()}connectProjectedDots(t,s){let e=this.projectedCoords[t],o=this.projectedCoords[s];e=this.convertCoords(e.x,e.y),o=this.convertCoords(o.x,o.y),this.canvas.drawLine(e.x,e.y,o.x,o.y)}changeScale(t,s){switch(t){case"X":{this.scaleX=this.maxScale*(s/100);break}case"Y":{this.scaleY=this.maxScale*(s/100);break}case"Z":{this.scaleZ=this.maxScale*(s/100);break}case"XYZ":this.scaleX=this.maxScale*(s/100),this.scaleY=this.maxScale*(s/100),this.scaleZ=this.maxScale*(s/100)}}saveFigure(){let t=y.unparse(this.originalCoords);k(t,"figure.csv","text/csv")}loadFigure(t){var o;const s=(o=t.target)==null?void 0:o.files[0],e=new FileReader;e.addEventListener("load",a=>{const r=a.currentTarget.result;let i=y.parse(r);i=i.data,this.addCoords(i)}),e.readAsText(s)}}const Fs={data(){return{lab1:null}},components:{},methods:{clearScreen(){this.lab1.clearCoords()},changeScale(h,t){console.log(h);const s=h.srcElement.value;this.lab1.changeScale(t,s)},saveFigure(){this.lab1.saveFigure()},loadFigure(h){this.lab1.loadFigure(h)}},mounted(){const h=this.$refs.canvas_elem,t=new C(h),s=new Es(t);this.lab1=s}},Ms={class:"container"},js=u("div",{class:"p-2"},[u("h3",null,"\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21164"),x(" 4. \u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u043D\u043E\u0433\u043E\u0433\u0440\u0430\u043D\u043D\u0438\u043A\u0430 \u0432 \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u0435 (\u0441\u0434\u0432\u0438\u0433, \u043F\u043E\u0432\u043E\u0440\u043E\u0442, \u0441\u0436\u0430\u0442\u0438\u0435, \u0442\u0440\u0435\u0445\u043C\u0435\u0440\u043D\u044B\u0439 \u043E\u0431\u0437\u043E\u0440). "),u("ul",null,[u("li",null,"\u0430) \u0432\u044B\u043F\u0443\u043A\u043B\u044B\u0439 (6)"),u("li",null,"\u0431) \u043D\u0435\u0432\u044B\u043F\u0443\u043A\u043B\u044B\u0439 (8)")])],-1),Ds={class:"lab_4__field"},$s={class:"lab_4__canvas",ref:"canvas_elem"},Ps={class:"lab_4__controls"},Bs={class:"my-3"},As=u("label",{for:"formFile",class:"form-label"},"Load figure",-1),Ls={class:"lab_4__range"},Is=u("label",{for:"scaleXYZ",class:"form-label"},"scaleXYZ",-1),Ks={class:"lab_4__range"},Ns=u("label",{for:"scaleX",class:"form-label"},"scaleX",-1),Rs={class:"lab_4__range"},zs=u("label",{for:"scaleY",class:"form-label"},"scaleY",-1),Os={class:"lab_4__range"},Us=u("label",{for:"scaleZ",class:"form-label"},"scaleZ",-1);function qs(h,t,s,e,o,a){return f(),m("div",Ms,[js,u("div",Ds,[u("canvas",$s,null,512)]),u("div",Ps,[u("button",{onClick:t[0]||(t[0]=(...r)=>a.clearScreen&&a.clearScreen(...r)),class:"btn btn-primary me-2"}," Clear Screen "),u("button",{onClick:t[1]||(t[1]=(...r)=>a.saveFigure&&a.saveFigure(...r)),class:"btn btn-primary"},"Save Figure"),u("div",Bs,[As,u("input",{class:"form-control",type:"file",id:"formFile",onChange:t[2]||(t[2]=(...r)=>a.loadFigure&&a.loadFigure(...r))},null,32)]),u("div",Ls,[Is,u("input",{type:"range",name:"scaleXYZ",min:"1",max:"100",onInput:t[3]||(t[3]=r=>a.changeScale(r,"XYZ")),class:"form-range"},null,32)]),u("div",Ks,[Ns,u("input",{type:"range",name:"scaleX",min:"1",max:"100",onInput:t[4]||(t[4]=r=>a.changeScale(r,"X")),class:"form-range"},null,32)]),u("div",Rs,[zs,u("input",{type:"range",name:"scaleY",min:"1",max:"100",onChange:t[5]||(t[5]=r=>a.changeScale(r,"Y")),class:"form-range"},null,32)]),u("div",Os,[Us,u("input",{type:"range",name:"scaleZ",min:"1",max:"100",onChange:t[6]||(t[6]=r=>a.changeScale(r,"Z")),class:"form-range"},null,32)])])])}var Ws=X(Fs,[["render",qs]]);class Ts{constructor(t){l(this,"canvas");l(this,"originalCoords",[]);l(this,"projectedCoords",[]);l(this,"angleZ",0);l(this,"angleX",0);l(this,"angleY",0);l(this,"scaleX",200);l(this,"scaleY",200);l(this,"scaleZ",200);l(this,"maxScale",600);l(this,"projection",[]);l(this,"rotationZ",[]);l(this,"rotationX",[]);l(this,"rotationY",[]);l(this,"translation",new n);l(this,"translationX",0);l(this,"translationY",0);l(this,"translationZ",0);l(this,"surfaceWidth",2*Math.PI);l(this,"surfaceHeight",2*Math.PI);l(this,"surfaceStepX",.3);l(this,"surfaceStepY",.3);l(this,"surfaceInitialShiftX",0);l(this,"surfaceInitialShiftY",0);l(this,"gridCoords",[]);this.canvas=t,this.init()}addCoords(t){for(let s=1;s<t.length;s++)this.originalCoords.push(new n(Number(t[s][0]),Number(t[s][1]),Number(t[s][2])))}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(t){const s="#000000";this.canvas.color=s,this.originalCoords=[],this.projectedCoords=[],t?(this.addCoords(t),this.startUpdate()):this.addCoordsManually(),window.addEventListener("keydown",e=>{this.keyboardEvent(e)}),this.startUpdate()}addCoordsManually(){console.log("add");for(let t=0;t<Math.ceil(this.surfaceHeight/this.surfaceStepY);t++)this.gridCoords.push([]);for(let t=this.surfaceInitialShiftX,s=0;t<this.surfaceWidth;t+=this.surfaceStepX,s+=1)for(let e=this.surfaceInitialShiftY,o=0;e<this.surfaceHeight;e+=this.surfaceStepY,o+=1){const a=this.fx(t,e),r=this.fy(t,e),i=this.fz(t,e),c=new n(a,r,i);this.originalCoords.push(c),this.gridCoords[o].push(c)}}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.originalCoords.length>0&&this.displayCoords2()}surfaceFunction(t,s){return Math.sin(2*s)+Math.sin(2*t)}fx(t,s){return(.5*Math.sin(t)+.4*Math.cos(s))*Math.cos(t)}fy(t,s){return(.5*Math.sin(t)+.4*Math.cos(s))*Math.sin(t)}fz(t,s){return .4*Math.sin(s)}displayCoords(){this.clearScreen(),this.updateRotation(),this.updateProjection(),this.projectedCoords=[];let t=new n(0,0,0);for(let s=0;s<this.originalCoords.length;s++){let e=this.originalCoords[s];t.add(e)}t=n.mul(t,1/this.originalCoords.length);for(let s of this.originalCoords){let e=new n(s.x,s.y,s.z);new n(this.translationX,this.translationY,this.translationZ);let o=new n(this.translationX,this.translationY,this.translationZ);e=n.add(e,n.mul(t,-1)),e=n.matMul(this.rotationX,e),e=n.matMul(this.rotationZ,e),e=n.matMul(this.rotationY,e),e=n.add(e,t),e=n.matMul(this.projection,e),e=n.add(e,o),this.projectedCoords.push(e);let a=this.convertCoords(e.x,e.y);this.canvas.setPoint(a.x,a.y)}Math.floor(this.surfaceHeight/this.surfaceStepY),Math.floor(this.surfaceWidth/this.surfaceStepX)-1}displayCoords2(){this.clearScreen(),this.updateRotation(),this.updateProjection();let t=new n(0,0,0);for(let o=0;o<this.originalCoords.length;o++){let a=this.originalCoords[o];t.add(a)}t=n.mul(t,1/this.originalCoords.length);let s=[];for(let o=0;o<this.gridCoords.length;o++)s.push([]);for(let o=0;o<this.gridCoords.length;o++)for(let a=0;a<this.gridCoords[0].length;a++){let r=this.gridCoords[o][a],i=new n(r.x,r.y,r.z);new n(this.translationX,this.translationY,this.translationZ);let c=new n(this.translationX,this.translationY,this.translationZ);i=n.add(i,n.mul(t,-1)),i=n.matMul(this.rotationX,i),i=n.matMul(this.rotationZ,i),i=n.matMul(this.rotationY,i),i=n.add(i,t),i=n.matMul(this.projection,i),i=n.add(i,c),this.projectedCoords.push(i);let d=this.convertCoords(i.x,i.y);this.canvas.setPoint(d.x,d.y),s[o].push(d)}const e=(o,a)=>o>=a?0:o;for(let o=0;o<this.gridCoords.length;o++)for(let a=0;a<this.gridCoords[0].length;a++){let r=s[o][a],i=s[e(o+1,this.gridCoords.length)][a];this.canvas.drawLine(r.x,r.y,i.x,i.y),r=s[o][a],i=s[o][e(a+1,this.gridCoords[0].length)],this.canvas.drawLine(r.x,r.y,i.x,i.y)}s=null,this.angleZ+=.001,this.angleY+=.003,this.angleX+=.001}convertCoords(t,s){return t+=this.canvas.width/2,s+=this.canvas.height/2,new n(t,s,0)}updateRotation(){const t=this.angleX,s=this.angleY,e=this.angleZ;this.rotationZ=[],this.rotationZ.push(new n(Math.cos(e),-Math.sin(e),0)),this.rotationZ.push(new n(Math.sin(e),Math.cos(e),0)),this.rotationZ.push(new n(0,0,1)),this.rotationX=[],this.rotationX.push(new n(1,0,0)),this.rotationX.push(new n(0,Math.cos(t),-Math.sin(t))),this.rotationX.push(new n(0,Math.sin(t),Math.cos(t))),this.rotationY=[],this.rotationY.push(new n(Math.cos(s),0,Math.sin(s))),this.rotationY.push(new n(0,1,0)),this.rotationY.push(new n(-Math.sin(s),0,Math.cos(s)))}updateProjection(){const t=this.scaleX,s=this.scaleY,e=this.scaleZ;this.projection=[],this.projection.push(n.mul(new n(1,0,0),t)),this.projection.push(n.mul(new n(0,1,0),s)),this.projection.push(n.mul(new n(0,0,1),e))}keyboardEvent(t){switch(t.code){case"KeyZ":{this.angleZ+=.1,console.log("rotate z");break}case"KeyX":{this.angleX+=.1,console.log("rotate x");break}case"KeyY":{this.angleY+=.1;break}case"KeyQ":{this.translationX+=10;break}case"KeyW":{this.translationY+=10;break}case"KeyE":{this.translationZ+=10;break}case"KeyA":{this.scaleX+=1;break}case"KeyS":{this.scaleY+=1;break}case"KeyD":{this.scaleZ+=1;break}}}clearScreen(){this.canvas.clear()}clearCoords(){this.originalCoords=[],this.angleX=0,this.angleY=0,this.angleZ=0,this.translationX=0,this.translationY=0,this.translationZ=0,this.scaleX=this.canvas.width,this.scaleY=this.canvas.width,this.scaleZ=this.canvas.width,this.clearScreen()}connectProjectedDots(t,s){let e=this.projectedCoords[t],o=this.projectedCoords[s];e=this.convertCoords(e.x,e.y),o=this.convertCoords(o.x,o.y),this.canvas.drawLine(e.x,e.y,o.x,o.y)}changeScale(t,s){switch(t){case"X":{this.scaleX=this.maxScale*(s/100);break}case"Y":{this.scaleY=this.maxScale*(s/100);break}case"Z":{this.scaleZ=this.maxScale*(s/100);break}case"XYZ":this.scaleX=this.maxScale*(s/100),this.scaleY=this.maxScale*(s/100),this.scaleZ=this.maxScale*(s/100)}}saveFigure(){let t=y.unparse(this.originalCoords);k(t,"figure.csv","text/csv")}loadFigure(t){var o;const s=(o=t.target)==null?void 0:o.files[0],e=new FileReader;e.addEventListener("load",a=>{const r=a.currentTarget.result;let i=y.parse(r);i=i.data,this.addCoords(i)}),e.readAsText(s)}}class Hs{constructor(t){l(this,"canvas");l(this,"originalCoords",[]);l(this,"projectedCoords",[]);l(this,"angleZ",0);l(this,"angleX",0);l(this,"angleY",0);l(this,"scaleX",200);l(this,"scaleY",200);l(this,"scaleZ",200);l(this,"maxScale",600);l(this,"projection",[]);l(this,"rotationZ",[]);l(this,"rotationX",[]);l(this,"rotationY",[]);l(this,"translation",new n);l(this,"translationX",0);l(this,"translationY",0);l(this,"translationZ",0);l(this,"surfaceWidth",2);l(this,"surfaceHeight",2);l(this,"surfaceStepX",.5);l(this,"surfaceStepY",.2);l(this,"surfaceInitialShiftX",0);l(this,"surfaceInitialShiftY",0);l(this,"gridCoords",[]);l(this,"gridSurfaceCoords",[]);this.canvas=t,this.init()}addCoords(t){for(let s=1;s<t.length;s++)this.originalCoords.push(new n(Number(t[s][0]),Number(t[s][1]),Number(t[s][2])))}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(t){const s="#000000";this.canvas.color=s,this.originalCoords=[],this.projectedCoords=[],t?(this.addCoords(t),this.startUpdate()):this.addCoordsManually(),window.addEventListener("keydown",e=>{this.keyboardEvent(e)}),this.startUpdate()}addCoordsManually(){console.log("add");for(let i=0;i<Math.ceil(this.surfaceHeight/this.surfaceStepY);i++)this.gridCoords.push([]);const t=1e-4;for(let i=this.surfaceInitialShiftY,c=0;i<this.surfaceHeight-t;i+=this.surfaceStepY,c+=1)for(let d=this.surfaceInitialShiftX,_=0;d<this.surfaceWidth-t;d+=this.surfaceStepX,_+=1){const p=d,g=i,w=B(0,1),b=new n(p,g,w);this.originalCoords.push(b),this.gridCoords[c].push(b)}const s=30,e=1/s;for(let i=0;i<s;i++)this.gridSurfaceCoords.push([]);const o=this.gridCoords.length,a=this.gridCoords[0].length;let r=0;for(let i=0;i<s;i+=1){let c=0;for(let d=0;d<s;d+=1){const _=this.bezierPoint(r,c,a,o);this.gridSurfaceCoords[i].push(_),c+=e}r+=e}}bezierPoint(t,s,e,o){let a=new n(0,0,0);for(let r=0;r<o;r++){const i=this.B(o-1,r,t);for(let c=0;c<e;c++){const d=this.B(e-1,c,s);let _=this.gridCoords[r][c];_=new n(_.x,_.y,_.z),_=n.mul(_,i*d),a.add(_)}}return a}B(t,s,e){const o=v(t)/(v(s)*v(t-s)),a=Math.pow(1-e,t-s),r=Math.pow(e,s);return o*a*r}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.originalCoords.length>0&&this.displayCoords2()}displayCoords2(){this.clearScreen(),this.updateRotation(),this.updateProjection();let t=new n(0,0,0);for(let s=0;s<this.originalCoords.length;s++){let e=this.originalCoords[s];t.add(e)}t=n.mul(t,1/this.originalCoords.length);for(let s=0;s<this.gridCoords.length;s++)for(let e=0;e<this.gridCoords[0].length;e++){let o=this.gridCoords[s][e],a=new n(o.x,o.y,o.z),r=new n(this.translationX,this.translationY,this.translationZ);a=n.add(a,n.mul(t,-1)),a=n.matMul(this.rotationX,a),a=n.matMul(this.rotationZ,a),a=n.matMul(this.rotationY,a),a=n.add(a,t),a=n.matMul(this.projection,a),a=n.add(a,r),this.projectedCoords.push(a);let i=this.convertCoords(a.x,a.y);this.canvas.setPoint(i.x,i.y,3)}for(let s=0;s<this.gridSurfaceCoords.length;s++)for(let e=0;e<this.gridSurfaceCoords[0].length;e++){let o=this.gridSurfaceCoords[s][e],a=new n(o.x,o.y,o.z),r=new n(this.translationX,this.translationY,this.translationZ);a=n.add(a,n.mul(t,-1)),a=n.matMul(this.rotationX,a),a=n.matMul(this.rotationZ,a),a=n.matMul(this.rotationY,a),a=n.add(a,t),a=n.matMul(this.projection,a),a=n.add(a,r),this.projectedCoords.push(a);let i=this.convertCoords(a.x,a.y);this.canvas.setPoint(i.x,i.y,1)}this.angleZ+=.001,this.angleY+=.003,this.angleX+=.001}convertCoords(t,s){return t+=this.canvas.width/2-this.surfaceWidth*this.scaleX/2,s+=this.canvas.width/2-this.surfaceHeight*this.scaleY/2,new n(t,s,0)}updateRotation(){const t=this.angleX,s=this.angleY,e=this.angleZ;this.rotationZ=[],this.rotationZ.push(new n(Math.cos(e),-Math.sin(e),0)),this.rotationZ.push(new n(Math.sin(e),Math.cos(e),0)),this.rotationZ.push(new n(0,0,1)),this.rotationX=[],this.rotationX.push(new n(1,0,0)),this.rotationX.push(new n(0,Math.cos(t),-Math.sin(t))),this.rotationX.push(new n(0,Math.sin(t),Math.cos(t))),this.rotationY=[],this.rotationY.push(new n(Math.cos(s),0,Math.sin(s))),this.rotationY.push(new n(0,1,0)),this.rotationY.push(new n(-Math.sin(s),0,Math.cos(s)))}updateProjection(){const t=this.scaleX,s=this.scaleY,e=this.scaleZ;this.projection=[],this.projection.push(n.mul(new n(1,0,0),t)),this.projection.push(n.mul(new n(0,1,0),s)),this.projection.push(n.mul(new n(0,0,1),e))}keyboardEvent(t){switch(t.code){case"KeyZ":{this.angleZ+=.1,console.log("rotate z");break}case"KeyX":{this.angleX+=.1,console.log("rotate x");break}case"KeyY":{this.angleY+=.1;break}case"KeyQ":{this.translationX+=10;break}case"KeyW":{this.translationY+=10;break}case"KeyE":{this.translationZ+=10;break}case"KeyA":{this.scaleX+=1;break}case"KeyS":{this.scaleY+=1;break}case"KeyD":{this.scaleZ+=1;break}}}clearScreen(){this.canvas.clear()}clearCoords(){this.originalCoords=[],this.angleX=0,this.angleY=0,this.angleZ=0,this.translationX=0,this.translationY=0,this.translationZ=0,this.scaleX=this.canvas.width,this.scaleY=this.canvas.width,this.scaleZ=this.canvas.width,this.clearScreen()}changeScale(t,s){switch(t){case"X":{this.scaleX=this.maxScale*(s/100);break}case"Y":{this.scaleY=this.maxScale*(s/100);break}case"Z":{this.scaleZ=this.maxScale*(s/100);break}case"XYZ":this.scaleX=this.maxScale*(s/100),this.scaleY=this.maxScale*(s/100),this.scaleZ=this.maxScale*(s/100)}}saveFigure(){let t=y.unparse(this.originalCoords);k(t,"figure.csv","text/csv")}loadFigure(t){var o;const s=(o=t.target)==null?void 0:o.files[0],e=new FileReader;e.addEventListener("load",a=>{const r=a.currentTarget.result;let i=y.parse(r);i=i.data,this.addCoords(i)}),e.readAsText(s)}}const Vs={data(){return{lab5:null,lab5_2:null}},components:{},methods:{clearScreen(){this.lab5.clearCoords()},changeScale(h,t){console.log(h);const s=h.srcElement.value;this.lab5.changeScale(t,s)},saveFigure(){this.lab5.saveFigure()},loadFigure(h){this.lab5.loadFigure(h)}},mounted(){const h=this.$refs.canvas_elem,t=new C(h,600,600),s=new Ts(t);this.lab5=s;const e=this.$refs.canvas_elem_2,o=new C(e,600,600),a=new Hs(o);this.lab5_2=a}},Qs={class:"container"},Gs=u("div",{class:"p-2"},[u("h3",null,"\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21165"),u("h4",null,"\u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u0438 \u0432 \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u0435."),u("ul",null,[u("li",null,"\u0430) \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u044C, \u0437\u0430\u0434\u0430\u043D\u043D\u0430\u044F \u0444\u043E\u0440\u043C\u0443\u043B\u043E\u0439. (6)"),u("li",null,"\u0431) \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u044C \u0411\u0435\u0437\u044C\u0435 (8)")])],-1),Js=u("h1",null,"\u0430) \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u044C, \u0437\u0430\u0434\u0430\u043D\u043D\u0430\u044F \u0444\u043E\u0440\u043C\u0443\u043B\u043E\u0439. (6)",-1),te={class:"lab_5__field"},se={class:"lab_5__canvas",ref:"canvas_elem"},ee=u("h1",null,"\u0431) \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u044C \u0411\u0435\u0437\u044C\u0435 (8)",-1),ae={class:"lab_5__field"},oe={class:"lab_5__canvas",ref:"canvas_elem_2"};function ne(h,t,s,e,o,a){return f(),m("div",Qs,[Gs,Js,u("div",te,[u("canvas",se,null,512)]),ee,u("div",ae,[u("canvas",oe,null,512)])])}var ie=X(Vs,[["render",ne]]);const re=q({history:W("/computer_graphics/"),routes:[{path:"/",name:"home",component:rt},{path:"/lab_1",component:St},{path:"/lab_2",component:gs},{path:"/lab_3",component:ks},{path:"/lab_4",component:Ws},{path:"/lab_5",component:ie}]}),A=T(V);A.use(re);A.mount("#app");
