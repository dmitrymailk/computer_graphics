var L=Object.defineProperty;var I=(h,t,s)=>t in h?L(h,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[t]=s;var c=(h,t,s)=>(I(h,typeof t!="symbol"?t+"":t,s),s);import{d as M,c as R,u as N,R as K,o as f,a as m,b as u,e as x,w as X,r as P,f as C,P as E,V as $,g as O,F as k,h as Z,i as z,t as F,j as U,k as q,l as T}from"./vendor.652083ab.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}};W();const V=M({setup(h){return(t,s)=>(f(),R(N(K)))}});var Y=(h,t)=>{const s=h.__vccOpts||h;for(const[e,o]of t)s[e]=o;return s};const H={},Q={class:"container mt-4"},G=u("h2",null,"\u0421\u043F\u0438\u0441\u043E\u043A \u043B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u044B\u0445",-1),J={class:"list-group"},tt=C("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 1"),st=C("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 2"),et=C("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 3"),ot=C("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 4"),at=C("\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F 5");function nt(h,t){const s=P("router-link");return f(),m("div",Q,[G,u("ul",J,[x(s,{class:"list-group-item text-center w-25",to:"/lab_1"},{default:X(()=>[tt]),_:1}),x(s,{class:"list-group-item text-center w-25",to:"/lab_2"},{default:X(()=>[st]),_:1}),x(s,{class:"list-group-item text-center w-25",to:"/lab_3"},{default:X(()=>[et]),_:1}),x(s,{class:"list-group-item text-center w-25",to:"/lab_4"},{default:X(()=>[ot]),_:1}),x(s,{class:"list-group-item text-center w-25",to:"/lab_5"},{default:X(()=>[at]),_:1})])])}var it=Y(H,[["render",nt]]);class r{constructor(t=0,s=0,e=0){c(this,"x",0);c(this,"y",0);c(this,"z",0);this.x=t,this.y=s,this.z=e}norm2(){let{x:t,y:s,z:e}=this;return Math.sqrt(t*t+s*s+e*e)}static mul(t,s){const{x:e,y:o,z:a}=t;return new r(e*s,o*s,a*s)}static lepr(t,s,e){const o=r.mul(t,-1);let a=r.add(s,o);return a=r.mul(a,e),r.add(t,a)}add(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}static add(t,s){return new r(t.x+s.x,t.y+s.y,t.z+s.z)}static matMul(t,s){let e=new r,o=0,a=0,i=0,n=[s.x,s.y,s.z],l=[t[0].toArray(),t[1].toArray(),t[2].toArray()];for(let d=0;d<3;d++)o+=l[0][d]*n[d],a+=l[1][d]*n[d],i+=l[2][d]*n[d];return e.x=o,e.y=a,e.z=i,e}toString(){const{x:t,y:s,z:e}=this;return`x=${t} y=${s} z=${e}`}toArray(){return[this.x,this.y,this.z]}}class y{constructor(t,s=600,e=600){c(this,"canvas");c(this,"ctx");c(this,"width",600);c(this,"height",600);c(this,"_color","#000000");this.canvas=t,this.width=s,this.height=e,this.setupCanvasElement(),this.setupCtx()}setupCanvasElement(){this.canvas.width=this.width,this.canvas.height=this.height}setupCtx(){const t=this.canvas.getContext("2d");t&&(this.ctx=t,this.ctx.font="18px serif"),this.ctx.imageSmoothingEnabled=!1}setPoint(t,s,e=1){this.ctx.fillRect(t,s,e,e)}drawLine(t,s,e,o){const a=this.ctx;a.beginPath(),a.moveTo(t,s),a.lineTo(e,o),a.stroke()}set color(t){this._color=t,this.ctx.fillStyle=t}get color(){return this._color}clear(){this.ctx.clearRect(0,0,this.width,this.height)}on(t,s){this.canvas.addEventListener(t,s)}}function rt(h,t){return Math.random()*(t-h+1)+h}function D(h,t,s){let e=new Blob([h],{type:s}),o=window.URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.download=t,a.click(),window.URL.revokeObjectURL(o),a.remove()}function w(h){let t=1;if(h==0||h==1)return t;for(var s=h;s>=1;s--)t=t*s;return t}class ut{constructor(t){c(this,"canvas");c(this,"coords",[]);c(this,"projectedCoords",[]);c(this,"angleZ",0);c(this,"angleX",0);c(this,"angleY",0);c(this,"scaleX",600);c(this,"scaleY",600);c(this,"scaleZ",600);c(this,"maxScale",600);c(this,"projection",[]);c(this,"rotationZ",[]);c(this,"rotationX",[]);c(this,"rotationY",[]);c(this,"translation",new r);c(this,"translationX",0);c(this,"translationY",0);c(this,"translationZ",0);this.canvas=t,this.scaleX=this.canvas.width,this.scaleY=this.canvas.height,this.scaleZ=this.canvas.width,this.init()}addCoords(t){for(let s=1;s<t.length;s++)this.coords.push(new r(Number(t[s][0]),Number(t[s][1]),Number(t[s][2])))}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(t){const s="#000000";this.canvas.color=s,this.coords=[],this.projectedCoords=[],t?(this.addCoords(t),this.startUpdate()):this.canvas.on("click",e=>{const o=e.offsetX,a=e.offsetY;this.canvas.setPoint(o,a,2);const i=o/this.canvas.width-.5,n=a/this.canvas.height-.5,l=rt(-.2,.2);this.coords.push(new r(i,n,l))}),window.addEventListener("keydown",e=>{this.keyboardEvent(e)}),this.startUpdate()}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.updateRotation(),this.updateProjection(),this.projectedCoords=[];let t=new r(0,0,0);for(let s=0;s<this.coords.length;s++){let e=this.coords[s];t.add(e)}t=r.mul(t,1/this.coords.length);for(let s of this.coords){let e=new r(s.x,s.y,s.z);new r(this.translationX,this.translationY,this.translationZ);let o=new r(this.translationX,this.translationY,this.translationZ);e=r.add(e,r.mul(t,-1)),e=r.matMul(this.rotationX,e),e=r.matMul(this.rotationZ,e),e=r.matMul(this.rotationY,e),e=r.add(e,t),e=r.matMul(this.projection,e),e=r.add(e,o),this.projectedCoords.push(e);let a=this.convertCoords(e.x,e.y);this.canvas.setPoint(a.x,a.y)}for(let s=0;s<this.projectedCoords.length-1;s++)this.connectProjectedDots(s,s+1)}convertCoords(t,s){return t+=this.canvas.width/2,s+=this.canvas.height/2,new r(t,s,0)}updateRotation(){const t=this.angleX,s=this.angleY,e=this.angleZ;this.rotationZ=[],this.rotationZ.push(new r(Math.cos(e),-Math.sin(e),0)),this.rotationZ.push(new r(Math.sin(e),Math.cos(e),0)),this.rotationZ.push(new r(0,0,1)),this.rotationX=[],this.rotationX.push(new r(1,0,0)),this.rotationX.push(new r(0,Math.cos(t),-Math.sin(t))),this.rotationX.push(new r(0,Math.sin(t),Math.cos(t))),this.rotationY=[],this.rotationY.push(new r(Math.cos(s),0,Math.sin(s))),this.rotationY.push(new r(0,1,0)),this.rotationY.push(new r(-Math.sin(s),0,Math.cos(s)))}updateProjection(){const t=this.scaleX,s=this.scaleY,e=this.scaleZ;this.projection=[],this.projection.push(r.mul(new r(1,0,0),t)),this.projection.push(r.mul(new r(0,1,0),s)),this.projection.push(r.mul(new r(0,0,1),e))}keyboardEvent(t){switch(t.code){case"KeyZ":{this.angleZ+=.1;break}case"KeyX":{this.angleX+=.1;break}case"KeyY":{this.angleY+=.1;break}case"KeyQ":{this.translationX+=10;break}case"KeyW":{this.translationY+=10;break}case"KeyE":{this.translationZ+=10;break}case"KeyA":{this.scaleX+=1;break}case"KeyS":{this.scaleY+=1;break}case"KeyD":{this.scaleZ+=1;break}}}clearScreen(){this.canvas.clear()}clearCoords(){this.coords=[],this.angleX=0,this.angleY=0,this.angleZ=0,this.translationX=0,this.translationY=0,this.translationZ=0,this.scaleX=this.canvas.width,this.scaleY=this.canvas.width,this.scaleZ=this.canvas.width,this.clearScreen()}connectProjectedDots(t,s){let e=this.projectedCoords[t],o=this.projectedCoords[s];e=this.convertCoords(e.x,e.y),o=this.convertCoords(o.x,o.y),this.canvas.drawLine(e.x,e.y,o.x,o.y)}changeScale(t,s){switch(t){case"X":{this.scaleX=this.maxScale*(s/100);break}case"Y":{this.scaleY=this.maxScale*(s/100);break}case"Z":{this.scaleZ=this.maxScale*(s/100);break}case"XYZ":this.scaleX=this.maxScale*(s/100),this.scaleY=this.maxScale*(s/100),this.scaleZ=this.maxScale*(s/100)}}saveFigure(){let t=E.unparse(this.coords);D(t,"figure.csv","text/csv")}loadFigure(t){var o;const s=(o=t.target)==null?void 0:o.files[0],e=new FileReader;e.addEventListener("load",a=>{const i=a.currentTarget.result;let n=E.parse(i);n=n.data,this.addCoords(n)}),e.readAsText(s)}}const lt={data(){return{test:123,lab1:null}},components:{VueMarkdown:$},methods:{clearScreen(){this.lab1.clearCoords()},changeScale(h,t){console.log(h);const s=h.srcElement.value;this.lab1.changeScale(t,s)},saveFigure(){this.lab1.saveFigure()},loadFigure(h){this.lab1.loadFigure(h)}},setup(h,t){return{src:O(`## \u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21161
    1. \u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u043C\u043A\u043D\u0443\u0442\u043E\u0439 \u043B\u043E\u043C\u0430\u043D\u043E\u0439 \u043F\u043E \u0442\u043E\u0447\u043A\u0430\u043C, \u0437\u0430\u0434\u0430\u043D\u043D\u044B\u043C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u043C.
    2. \u041F\u043E\u0432\u043E\u0440\u043E\u0442, \u0441\u0434\u0432\u0438\u0433, \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435, \u0441\u0436\u0430\u0442\u0438\u0435. 
    3. \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445 \u0432 \u0444\u0430\u0439\u043B.
    4. \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043A\u0440\u0438\u0432\u043E\u0439 \u0438\u0437 \u0444\u0430\u0439\u043B\u0430.`)}},mounted(){const h=this.$refs.canvas_elem,t=new y(h),s=new ut(t);this.lab1=s}},ct={class:"lab_1"},ht={class:"lab_1__title"},dt={class:"lab_1__field"},_t={class:"lab_1__canvas",ref:"canvas_elem"},pt={class:"lab_1__controls"},gt={class:"my-3"},ft=u("label",{for:"formFile",class:"form-label"},"Load figure",-1),mt={class:"lab_1__range"},vt=u("label",{for:"scaleXYZ",class:"form-label"},"scaleXYZ",-1),wt={class:"lab_1__range"},bt=u("label",{for:"scaleX",class:"form-label"},"scaleX",-1),yt={class:"lab_1__range"},Ct=u("label",{for:"scaleY",class:"form-label"},"scaleY",-1),xt={class:"lab_1__range"},Et=u("label",{for:"scaleZ",class:"form-label"},"scaleZ",-1);function Yt(h,t,s,e,o,a){const i=P("vue-markdown");return f(),m("div",ct,[u("div",ht,[x(i,{source:e.src},null,8,["source"])]),u("div",dt,[u("canvas",_t,null,512)]),u("div",pt,[u("button",{onClick:t[0]||(t[0]=(...n)=>a.clearScreen&&a.clearScreen(...n)),class:"btn btn-primary me-2"}," Clear Screen "),u("button",{onClick:t[1]||(t[1]=(...n)=>a.saveFigure&&a.saveFigure(...n)),class:"btn btn-primary"},"Save Figure"),u("div",gt,[ft,u("input",{class:"form-control",type:"file",id:"formFile",onChange:t[2]||(t[2]=(...n)=>a.loadFigure&&a.loadFigure(...n))},null,32)]),u("div",mt,[vt,u("input",{type:"range",name:"scaleXYZ",min:"1",max:"100",onInput:t[3]||(t[3]=n=>a.changeScale(n,"XYZ")),class:"form-range"},null,32)]),u("div",wt,[bt,u("input",{type:"range",name:"scaleX",min:"1",max:"100",onInput:t[4]||(t[4]=n=>a.changeScale(n,"X")),class:"form-range"},null,32)]),u("div",yt,[Ct,u("input",{type:"range",name:"scaleY",min:"1",max:"100",onChange:t[5]||(t[5]=n=>a.changeScale(n,"Y")),class:"form-range"},null,32)]),u("div",xt,[Et,u("input",{type:"range",name:"scaleZ",min:"1",max:"100",onChange:t[6]||(t[6]=n=>a.changeScale(n,"Z")),class:"form-range"},null,32)])])])}var Xt=Y(lt,[["render",Yt]]);class Ft{constructor(t,s){c(this,"canvas");c(this,"coords_2_2",[]);c(this,"isDrawCurve",!1);c(this,"vueComponent",null);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_2_2.push(new r(s,e,0)),this.vueComponent.coords_2_2.push([s,e])}),this.startUpdate()}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_2_2.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.drawCurve()}setPoints(){for(let t of this.coords_2_2)this.canvas.setPoint(t.x,t.y,1)}changeCoordsPos(t,s,e){this.coords_2_2[t][s]=Number(e)}drawCurve(){if(this.coords_2_2.length>=3){const t=[];for(let i=0;i<1.0001;i+=.01){let n=this.coords_2_2.slice();const l=n.shift(),d=n.shift();for(n.unshift(l),n.push(d);n.length!=1;){n=this.dublicate(n);for(let _=0;_<n.length;_++){const p=n.shift(),g=n.shift(),v=r.lepr(p,g,i);n.push(v)}}t.push(n[0])}for(let i=0;i<t.length-1;i++){const n=t[i],l=t[i+1];this.canvas.drawLine(n.x,n.y,l.x,l.y)}let e=this.coords_2_2.slice();const o=e.shift(),a=e.shift();e.unshift(o),e.push(a);for(let i=0;i<e.length-1;i++){const n=e[i],l=e[i+1];this.canvas.drawLine(n.x,n.y,l.x,l.y)}}}dublicate(t){let s=t.slice(),e=[];e.push(s.slice(0,1)[0]);for(let o=1;o<s.length-1;o++)e.push(s.slice(o,o+1)[0]),e.push(s.slice(o,o+1)[0]);return e.push(s.slice(s.length-1)[0]),e}setDrawCurve(){console.log("draw curve"),this.coords_2_2.length>=3&&(this.isDrawCurve=!0)}clearScreen(){this.canvas.clear()}}class St{constructor(t,s){c(this,"canvas");c(this,"coords_2_1",[]);c(this,"vueComponent",null);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_2_1.push(new r(s,e,0)),this.vueComponent.coords_2_1.push([s,e])}),this.startUpdate()}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_2_1.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.drawCurve()}setPoints(){for(let t of this.coords_2_1)this.canvas.setPoint(t.x,t.y,3)}changeCoordsPos(t,s,e){this.coords_2_1[t][s]=Number(e)}drawCurve(){if(this.coords_2_1.length>=3){let t=[],s=.01;const e=this.coords_2_1.length-1,o=w(e);let a=this.coords_2_1.slice();for(let i=s;i<1;i+=s){let n=new r(0,0,0);for(let l=0;l<=e;l++){let d=new r(a[l].x,a[l].y,0),_=o/(w(l)*w(e-l)),p=Math.pow(1-i,e-l),g=Math.pow(i,l);d=r.mul(d,_*p*g),n.add(d)}t.push(n)}for(let i=0;i<t.length-1;i++){const n=t[i],l=t[i+1];this.canvas.drawLine(n.x,n.y,l.x,l.y)}for(let i=0;i<a.length-1;i++){const n=a[i],l=a[i+1];this.canvas.drawLine(n.x,n.y,l.x,l.y)}}}clearScreen(){this.canvas.clear()}}class kt{constructor(t,s){c(this,"canvas");c(this,"coords_2_3",[]);c(this,"vueComponent",null);c(this,"partsIsOn",!0);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_2_3.push(new r(s,e,0)),this.vueComponent.coords_2_3.push([s,e])}),this.startUpdate()}setPartsIsOn(){this.partsIsOn=!this.partsIsOn}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_2_3.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.drawCurve()}setPoints(){for(let t of this.coords_2_3)this.canvas.setPoint(t.x,t.y,3)}changeCoordsPos(t,s,e){this.coords_2_3[t][s]=Number(e)}drawCurve(){if(this.coords_2_3.length>=3){let t=[],s=.01,e=this.coords_2_3.slice();if(this.partsIsOn){let i=[];const n=e.length;for(let l=0;l<n;l++)if(i.push(e[l]),l<n-1){let d=e[l],_=e[l+1],p=r.add(d,_);p=r.mul(p,.5),i.push(p)}e=i.slice()}for(let i=0;i<e.length;i++)this.canvas.setPoint(e[i].x,e[i].y,4);const o=3-1,a=w(o);for(let i=1;i<e.length-o;i+=o)for(let n=s;n<1;n+=s){let l=new r(0,0,0);for(let d=0;d<=o;d++){let _=new r(e[i+d].x,e[i+d].y,0),p=a/(w(d)*w(o-d)),g=Math.pow(1-n,o-d),v=Math.pow(n,d);_=r.mul(_,p*g*v),l.add(_)}t.push(l)}for(let i=0;i<t.length-1;i++){const n=t[i];this.canvas.setPoint(n.x,n.y);const l=t[i+1];this.canvas.drawLine(n.x,n.y,l.x,l.y)}}}clearScreen(){this.canvas.clear()}}class Zt{constructor(t,s){c(this,"canvas");c(this,"coords_2_4",[]);c(this,"vueComponent",null);c(this,"partsIsOn",!0);c(this,"weights",[]);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_2_4.push(new r(s,e,0)),this.vueComponent.coords_2_4.push([s,e]),this.weights.push(1)}),this.startUpdate()}setPartsIsOn(){this.partsIsOn=!this.partsIsOn}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_2_4.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.drawCurve()}setPoints(){for(let t of this.coords_2_4)this.canvas.setPoint(t.x,t.y,3)}B(t,s,e,o){let a=e/(w(s)*w(o-s)),i=Math.pow(1-t,o-s),n=Math.pow(t,s);return a*i*n}Sigma(t,s,e){let o=0;for(let a=0;a<this.coords_2_4.length;a++)o+=this.B(t,a,s,e)*this.weights[a];return o}R(t,s,e,o){const a=this.B(t,s,e,o)*this.weights[s],i=this.Sigma(t,e,o);return a/i}drawCurve(){if(this.coords_2_4.length>=3){let t=[],s=.01;const e=this.coords_2_4.length-1,o=w(e);let a=this.coords_2_4.slice();console.log(this.weights);for(let i=0;i<=1+s;i+=s){let n=new r(0,0,0);for(let l=0;l<=e;l++){let d=new r(a[l].x,a[l].y,0);const _=this.R(i,l,o,e);d=r.mul(d,_),n.add(d)}t.push(n)}for(let i=0;i<t.length-1;i++){const n=t[i],l=t[i+1];this.canvas.drawLine(n.x,n.y,l.x,l.y)}}}changeWeights(t,s){this.weights[t]=1+10*(Number(s)/100)}clearScreen(){this.canvas.clear()}}const Mt=M({data(){return{lab_2_1:null,coords_2_1:[],lab_2_2:null,coords_2_2:[],lab_2_3:null,coords_2_3:[],lab_2_4:null,coords_2_4:[]}},components:{VueMarkdown:$},methods:{setDrawCurve(){this.lab.setDrawCurve()},changeCoordsPos_2_2(h,t,s){let e=h.srcElement.value;this.lab_2_2.changeCoordsPos(s,t,e)},changeCoordsPos_2_1(h,t,s){let e=h.srcElement.value;this.lab_2_1.changeCoordsPos(s,t,e)},changeWeights_2_4(h,t){let s=h.srcElement.value;this.lab_2_4.changeWeights(t,s)},setPartsIsOn(){this.lab_2_3.setPartsIsOn()}},mounted(){const h=this.$refs.canvas_elem_2_2,t=new y(h),s=new Ft(t,this);this.lab_2_2=s;const e=this.$refs.canvas_elem_2_1,o=new y(e),a=new St(o,this);this.lab_2_1=a;const i=this.$refs.canvas_elem_2_3,n=new y(i),l=new kt(n,this);this.lab_2_3=l;const d=this.$refs.canvas_elem_2_4,_=new y(d),p=new Zt(_,this);this.lab_2_4=p}}),$t={class:"container"},Dt=z('<div class="p-2"><h3>\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21162</h3> 2. \u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u043A\u0440\u0438\u0432\u043E\u0439 \u0411\u0435\u0437\u044C\u0435 <ul><li><a target="_blank" href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Explicit_definition">2.1 \u043E\u0431\u044B\u0447\u043D\u044B\u0439 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C (4)</a></li><li><a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Quadratic_B%C3%A9zier_curves" target="_blank">2.2 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C \u0434\u0435 \u041A\u0430\u0441\u0442\u0435\u043B\u044C\u043E (4)</a></li><li><a href="https://en.wikipedia.org/wiki/Composite_B%C3%A9zier_curve" target="_blank">2.3 \u0441\u043E\u0441\u0442\u0430\u0432\u043D\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F (3)</a></li><li><a href="https://pages.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/NURBS/RB.html" target="_blank"> 2.4 \u0440\u0430\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F \u0411\u0435\u0437\u044C\u0435 (3) </a></li></ul></div>',1),jt={class:"container"},Pt=u("h3",null,"2.1 \u043E\u0431\u044B\u0447\u043D\u044B\u0439 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C (4)",-1),Bt={class:"lab_2__canvas",ref:"canvas_elem_2_1"},At=u("br",null,null,-1),Lt={class:"card-body"},It={class:"card-title"},Rt=u("label",{for:"x",class:"form-label"},"x",-1),Nt=["onInput"],Kt=u("label",{for:"y",class:"form-label"},"y",-1),Ot=["onInput"],zt=u("hr",null,null,-1),Ut={class:"container"},qt=u("h3",null,"2.2 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C \u0434\u0435 \u041A\u0430\u0441\u0442\u0435\u043B\u044C\u043E (4)",-1),Tt={class:"lab_2__canvas",ref:"canvas_elem_2_2"},Wt=u("br",null,null,-1),Vt={class:"card-body",key:"item"},Ht={class:"card-title"},Qt=u("label",{for:"x",class:"form-label"},"x",-1),Gt=["onInput"],Jt=u("label",{for:"y",class:"form-label"},"y",-1),ts=["onInput"],ss=u("hr",null,null,-1),es={class:"container"},os=u("h3",null,"2.3 \u0441\u043E\u0441\u0442\u0430\u0432\u043D\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F",-1),as={class:"lab_2__canvas",ref:"canvas_elem_2_3"},ns=u("br",null,null,-1),is={class:"container"},rs=u("h3",null,"2.4 \u0440\u0430\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F \u0411\u0435\u0437\u044C\u0435",-1),us={class:"lab_2__canvas",ref:"canvas_elem_2_4"},ls=u("br",null,null,-1),cs={class:"card-body",key:"item"},hs={class:"card-title"},ds=u("label",{for:"weight",class:"form-label"},"weight",-1),_s=["onInput"];function ps(h,t,s,e,o,a){return f(),m("div",$t,[Dt,u("div",jt,[Pt,u("canvas",Bt,null,512),At,(f(!0),m(k,null,Z(h.coords_2_1,(i,n)=>(f(),m("div",{class:"card mt-2",key:i},[u("div",Lt,[u("h5",It,"Point "+F(n),1),Rt,u("input",{type:"range",name:"x",min:"1",max:"600",onInput:l=>h.changeCoordsPos_2_1(l,"x",n),class:"form-range"},null,40,Nt),Kt,u("input",{type:"range",name:"y",min:"1",max:"600",onInput:l=>h.changeCoordsPos_2_1(l,"y",n),class:"form-range"},null,40,Ot)])]))),128)),zt]),u("div",Ut,[qt,u("canvas",Tt,null,512),Wt,(f(!0),m(k,null,Z(h.coords_2_2,(i,n)=>(f(),m("div",{class:"card mt-2",key:i},[u("div",Vt,[u("h5",Ht,"Point "+F(n),1),Qt,u("input",{type:"range",name:"x",min:"1",max:"600",onInput:l=>h.changeCoordsPos_2_2(l,"x",n),class:"form-range"},null,40,Gt),Jt,u("input",{type:"range",name:"y",min:"1",max:"600",onInput:l=>h.changeCoordsPos_2_2(l,"y",n),class:"form-range"},null,40,ts)])]))),128)),ss]),u("div",es,[os,u("canvas",as,null,512),ns,u("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...i)=>h.setPartsIsOn&&h.setPartsIsOn(...i))}," Turn off parts ")]),u("div",is,[rs,u("canvas",us,null,512),ls,(f(!0),m(k,null,Z(h.coords_2_4,(i,n)=>(f(),m("div",{class:"card mt-2",key:i},[u("div",cs,[u("h5",hs,"Point weight "+F(n),1),ds,u("input",{type:"range",name:"weight",min:"1",max:"100",onInput:l=>h.changeWeights_2_4(l,n),class:"form-range"},null,40,_s)])]))),128))])])}var gs=Y(Mt,[["render",ps]]);function fs(h,t,s,e,o){let a,i,n,l,d=s.length,_=s[0].length;if(t<1)throw new Error("degree must be at least 1 (linear)");if(t>d-1)throw new Error("degree must be less than or equal to point count - 1");if(!o)for(o=[],a=0;a<d;a++)o[a]=1;if(e){if(e.length!==d+t+1)throw new Error("bad knot vector length")}else{let A=[];for(a=0;a<d+t+1;a++)A[a]=a}let p=[t,e.length-1-t],g=e[p[0]],v=e[p[1]];if(h=h*(v-g)+g,h<g||h>v)throw new Error("out of bounds");for(n=p[0];n<p[1]&&!(h>=e[n]&&h<=e[n+1]);n++);console.log(n);let b=[];for(a=0;a<d;a++){for(b[a]=[],i=0;i<_;i++)b[a][i]=s[a][i]*o[a];b[a][_]=o[a]}let S;for(l=1;l<=t+1;l++)for(a=n;a>n-t-1+l;a--)for(S=(h-e[a])/(e[a+t+1-l]-e[a]),i=0;i<_+1;i++)b[a][i]=(1-S)*b[a-1][i]+S*b[a][i];let j=[];for(a=0;a<_;a++)j[a]=b[n][a]/b[n][_];return j}class ms{constructor(t,s){c(this,"canvas");c(this,"coords_3_1",[]);c(this,"vueComponent",null);c(this,"knots",[]);c(this,"degree",2);c(this,"precision",1/100);this.canvas=t,this.vueComponent=s,this.init()}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(){this.canvas.on("click",t=>{const s=t.offsetX,e=t.offsetY;this.coords_3_1.push(new r(s,e,0)),this.vueComponent.pointsAmount+=1}),this.startUpdate()}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.coords_3_1.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.setPoints(),this.coords_3_1.length>2&&this.drawB_Spline()}setPoints(){for(let t of this.coords_3_1)this.canvas.setPoint(t.x,t.y,2)}debug_func(){this.drawB_Spline()}setDegree(t){t<=2?this.degree=2:t<this.coords_3_1.length-1?this.degree=t:this.degree=this.coords_3_1.length-1}drawB_Spline(){const t=this.precision;let s=[],e=[];for(let d=0;d<this.coords_3_1.length;d++)e.push([this.coords_3_1[d].x,this.coords_3_1[d].y]);const o=this.degree;let a=[];const n=this.coords_3_1.length+o+1;for(let d=0;d<n;d++)d<=o?a.push(0):d<n-o-1?a.push(d/n):a.push(1);this.knots=a;let l=this.coords_3_1.length;for(let d=0;d<=1;d+=t){let _=0,p=0;for(let g=0;g<l;g++){let v=this.N(g,o,d);_+=v*this.coords_3_1[g].x,p+=v*this.coords_3_1[g].y}s.push([_,p])}for(let d=0;d<s.length-1;d++){const _=s[d],p=s[d+1];this.canvas.drawLine(_[0],_[1],p[0],p[1])}this.canvas.drawLine(s[s.length-1][0],s[s.length-1][1],this.coords_3_1[this.coords_3_1.length-1].x,this.coords_3_1[this.coords_3_1.length-1].y)}drawB_Spline_2(){let s=[],e=[];for(let l=0;l<this.coords_3_1.length;l++)e.push([this.coords_3_1[l].x,this.coords_3_1[l].y]);const o=2;let a=[];const i=this.coords_3_1.length+o+1;let n=0;for(let l=0;l<i;l++)l<o-1?a.push(n):l<i-o?(a.push(n/o),n=1):a.push(n/o);for(let l=0;l<1;l+=1/100){let d=fs(l,o,e,a);console.log(d),s.push(d)}for(let l=0;l<s.length-1;l++){const d=s[l],_=s[l+1];this.canvas.drawLine(d[0],d[1],_[0],_[1])}}clearScreen(){this.canvas.clear()}N(t,s,e){if(s==0)return this.knots[t]<=e&&e<=this.knots[t+1]?1:0;let o;this.knots[t+s]==this.knots[t]?e==this.knots[t]?o=0:o=1:o=(e-this.knots[t])/(this.knots[t+s]-this.knots[t]);let a;return this.knots[t+s+1]==this.knots[t+1]?this.knots[t+s+1]==e?a=0:a=1:a=(this.knots[t+s+1]-e)/(this.knots[t+s+1]-this.knots[t+1]),o*this.N(t,s-1,e)+a*this.N(t+1,s-1,e)}}const vs=M({data(){return{lab_3_1:null,pointsAmount:0}},components:{VueMarkdown:$},methods:{setDegree(h){if(h.data&&!isNaN(h.data)){let t=Number(h.data);this.lab_3_1.setDegree(t)}}},mounted(){const h=this.$refs.canvas_elem_3_1,t=new y(h),s=new ms(t,this);this.lab_3_1=s}}),ws={class:"container"},bs=u("div",{class:"p-2"},[u("h3",null,"\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21163"),C(" 3. \u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u043F\u043B\u0430\u0439\u043D\u043E\u0432\u044B\u0445 \u043A\u0440\u0438\u0432\u044B\u0445 "),u("ul",null,[u("li",null,"\u0441\u043F\u043B\u0430\u0439\u043D\u043E\u0432\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F 2-\u0433\u043E \u043F\u043E\u0440\u044F\u0434\u043A\u0430 (4)"),u("li",null,"\u0441\u043F\u043B\u0430\u0439\u043D\u043E\u0432\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F 3-\u0433\u043E \u043F\u043E\u0440\u044F\u0434\u043A\u0430 (4)"),u("li",null,"\u0441\u043F\u043B\u0430\u0439\u043D\u043E\u0432\u0430\u044F \u043A\u0440\u0438\u0432\u0430\u044F \u043F\u0440\u043E\u0438\u0437\u0432\u043E\u043B\u044C\u043D\u043E\u0433\u043E \u043F\u043E\u0440\u044F\u0434\u043A\u0430 (6)")])],-1),ys={class:"container"},Cs=u("h3",null,"2.1 \u043E\u0431\u044B\u0447\u043D\u044B\u0439 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C (4)",-1),xs={class:"lab_3__canvas",ref:"canvas_elem_3_1"},Es=u("br",null,null,-1),Ys={class:"input-group mt-3 w-50 mb-5"},Xs=u("span",{class:"input-group-text"},"B-spline degree",-1);function Fs(h,t,s,e,o,a){return f(),m("div",ws,[bs,u("div",ys,[Cs,u("canvas",xs,null,512),Es,u("h4",null,"Points amount: "+F(h.pointsAmount),1),u("div",Ys,[Xs,u("input",{type:"text",class:"form-control",value:"2",onInput:t[0]||(t[0]=(...i)=>h.setDegree&&h.setDegree(...i))},null,32)])])])}var Ss=Y(vs,[["render",Fs]]);class ks{constructor(t){c(this,"canvas");c(this,"originalCoords",[]);c(this,"transformedCoords",[]);c(this,"projectedCoords",[]);c(this,"traversalIndexes",[]);c(this,"angleZ",0);c(this,"angleX",0);c(this,"angleY",0);c(this,"scaleX",150);c(this,"scaleY",150);c(this,"scaleZ",150);c(this,"maxScale",600);c(this,"projection",[]);c(this,"rotationZ",[]);c(this,"rotationX",[]);c(this,"rotationY",[]);c(this,"translation",new r);c(this,"translationX",0);c(this,"translationY",0);c(this,"translationZ",0);this.canvas=t,this.init()}addCoords(t){for(let s=1;s<t.length;s++)this.originalCoords.push(new r(Number(t[s][0]),Number(t[s][1]),Number(t[s][2])))}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(t){const s="#000000";this.canvas.color=s,this.originalCoords=[],this.projectedCoords=[],t?(this.addCoords(t),this.startUpdate()):this.addCoordsManually(),window.addEventListener("keydown",e=>{this.keyboardEvent(e)}),this.startUpdate()}addCoordsManually(){let t=[[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.25,-.25,-.25]];for(const e of t)this.originalCoords.push(new r(e[0],e[1],e[2]));const s=[[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7],[0,8],[8,1]];this.traversalIndexes=s}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.originalCoords.length>0&&this.displayCoords()}displayCoords(){this.clearScreen(),this.updateRotation(),this.updateProjection(),this.projectedCoords=[];let t=new r(0,0,0);for(let e=0;e<this.originalCoords.length;e++){let o=this.originalCoords[e];t.add(o)}t=r.mul(t,1/this.originalCoords.length);let s=0;for(let e of this.originalCoords){let o=new r(e.x,e.y,e.z);new r(this.translationX,this.translationY,this.translationZ);let a=new r(this.translationX,this.translationY,this.translationZ);o=r.add(o,r.mul(t,-1)),o=r.matMul(this.rotationX,o),o=r.matMul(this.rotationZ,o),o=r.matMul(this.rotationY,o),o=r.add(o,t),o=r.matMul(this.projection,o),o=r.add(o,a),this.projectedCoords.push(o);let i=this.convertCoords(o.x,o.y);this.canvas.ctx.fillText(`${s}`,i.x,i.y),this.canvas.setPoint(i.x,i.y),s+=1}for(const e of this.traversalIndexes)this.connectProjectedDots(e[0],e[1])}convertCoords(t,s){return t+=this.canvas.width/2,s+=this.canvas.height/2,new r(t,s,0)}updateRotation(){const t=this.angleX,s=this.angleY,e=this.angleZ;this.rotationZ=[],this.rotationZ.push(new r(Math.cos(e),-Math.sin(e),0)),this.rotationZ.push(new r(Math.sin(e),Math.cos(e),0)),this.rotationZ.push(new r(0,0,1)),this.rotationX=[],this.rotationX.push(new r(1,0,0)),this.rotationX.push(new r(0,Math.cos(t),-Math.sin(t))),this.rotationX.push(new r(0,Math.sin(t),Math.cos(t))),this.rotationY=[],this.rotationY.push(new r(Math.cos(s),0,Math.sin(s))),this.rotationY.push(new r(0,1,0)),this.rotationY.push(new r(-Math.sin(s),0,Math.cos(s)))}updateProjection(){const t=this.scaleX,s=this.scaleY,e=this.scaleZ;this.projection=[],this.projection.push(r.mul(new r(1,0,0),t)),this.projection.push(r.mul(new r(0,1,0),s)),this.projection.push(r.mul(new r(0,0,1),e))}keyboardEvent(t){switch(t.code){case"KeyZ":{this.angleZ+=.1;break}case"KeyX":{this.angleX+=.1;break}case"KeyY":{this.angleY+=.1;break}case"KeyQ":{this.translationX+=10;break}case"KeyW":{this.translationY+=10;break}case"KeyE":{this.translationZ+=10;break}case"KeyA":{this.scaleX+=1;break}case"KeyS":{this.scaleY+=1;break}case"KeyD":{this.scaleZ+=1;break}}}clearScreen(){this.canvas.clear()}clearCoords(){this.originalCoords=[],this.angleX=0,this.angleY=0,this.angleZ=0,this.translationX=0,this.translationY=0,this.translationZ=0,this.scaleX=this.canvas.width,this.scaleY=this.canvas.width,this.scaleZ=this.canvas.width,this.clearScreen()}connectProjectedDots(t,s){let e=this.projectedCoords[t],o=this.projectedCoords[s];e=this.convertCoords(e.x,e.y),o=this.convertCoords(o.x,o.y),this.canvas.drawLine(e.x,e.y,o.x,o.y)}changeScale(t,s){switch(t){case"X":{this.scaleX=this.maxScale*(s/100);break}case"Y":{this.scaleY=this.maxScale*(s/100);break}case"Z":{this.scaleZ=this.maxScale*(s/100);break}case"XYZ":this.scaleX=this.maxScale*(s/100),this.scaleY=this.maxScale*(s/100),this.scaleZ=this.maxScale*(s/100)}}saveFigure(){let t=E.unparse(this.originalCoords);D(t,"figure.csv","text/csv")}loadFigure(t){var o;const s=(o=t.target)==null?void 0:o.files[0],e=new FileReader;e.addEventListener("load",a=>{const i=a.currentTarget.result;let n=E.parse(i);n=n.data,this.addCoords(n)}),e.readAsText(s)}}const Zs={data(){return{lab1:null}},components:{},methods:{clearScreen(){this.lab1.clearCoords()},changeScale(h,t){console.log(h);const s=h.srcElement.value;this.lab1.changeScale(t,s)},saveFigure(){this.lab1.saveFigure()},loadFigure(h){this.lab1.loadFigure(h)}},mounted(){const h=this.$refs.canvas_elem,t=new y(h),s=new ks(t);this.lab1=s}},Ms={class:"container"},$s=u("div",{class:"p-2"},[u("h3",null,"\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21164"),C(" 4. \u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u043D\u043E\u0433\u043E\u0433\u0440\u0430\u043D\u043D\u0438\u043A\u0430 \u0432 \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u0435 (\u0441\u0434\u0432\u0438\u0433, \u043F\u043E\u0432\u043E\u0440\u043E\u0442, \u0441\u0436\u0430\u0442\u0438\u0435, \u0442\u0440\u0435\u0445\u043C\u0435\u0440\u043D\u044B\u0439 \u043E\u0431\u0437\u043E\u0440). "),u("ul",null,[u("li",null,"\u0430) \u0432\u044B\u043F\u0443\u043A\u043B\u044B\u0439 (6)"),u("li",null,"\u0431) \u043D\u0435\u0432\u044B\u043F\u0443\u043A\u043B\u044B\u0439 (8)")])],-1),Ds={class:"lab_4__field"},js={class:"lab_4__canvas",ref:"canvas_elem"},Ps={class:"lab_4__controls"},Bs={class:"my-3"},As=u("label",{for:"formFile",class:"form-label"},"Load figure",-1),Ls={class:"lab_4__range"},Is=u("label",{for:"scaleXYZ",class:"form-label"},"scaleXYZ",-1),Rs={class:"lab_4__range"},Ns=u("label",{for:"scaleX",class:"form-label"},"scaleX",-1),Ks={class:"lab_4__range"},Os=u("label",{for:"scaleY",class:"form-label"},"scaleY",-1),zs={class:"lab_4__range"},Us=u("label",{for:"scaleZ",class:"form-label"},"scaleZ",-1);function qs(h,t,s,e,o,a){return f(),m("div",Ms,[$s,u("div",Ds,[u("canvas",js,null,512)]),u("div",Ps,[u("button",{onClick:t[0]||(t[0]=(...i)=>a.clearScreen&&a.clearScreen(...i)),class:"btn btn-primary me-2"}," Clear Screen "),u("button",{onClick:t[1]||(t[1]=(...i)=>a.saveFigure&&a.saveFigure(...i)),class:"btn btn-primary"},"Save Figure"),u("div",Bs,[As,u("input",{class:"form-control",type:"file",id:"formFile",onChange:t[2]||(t[2]=(...i)=>a.loadFigure&&a.loadFigure(...i))},null,32)]),u("div",Ls,[Is,u("input",{type:"range",name:"scaleXYZ",min:"1",max:"100",onInput:t[3]||(t[3]=i=>a.changeScale(i,"XYZ")),class:"form-range"},null,32)]),u("div",Rs,[Ns,u("input",{type:"range",name:"scaleX",min:"1",max:"100",onInput:t[4]||(t[4]=i=>a.changeScale(i,"X")),class:"form-range"},null,32)]),u("div",Ks,[Os,u("input",{type:"range",name:"scaleY",min:"1",max:"100",onChange:t[5]||(t[5]=i=>a.changeScale(i,"Y")),class:"form-range"},null,32)]),u("div",zs,[Us,u("input",{type:"range",name:"scaleZ",min:"1",max:"100",onChange:t[6]||(t[6]=i=>a.changeScale(i,"Z")),class:"form-range"},null,32)])])])}var Ts=Y(Zs,[["render",qs]]);class Ws{constructor(t){c(this,"canvas");c(this,"originalCoords",[]);c(this,"projectedCoords",[]);c(this,"angleZ",0);c(this,"angleX",0);c(this,"angleY",0);c(this,"scaleX",200);c(this,"scaleY",200);c(this,"scaleZ",200);c(this,"maxScale",600);c(this,"projection",[]);c(this,"rotationZ",[]);c(this,"rotationX",[]);c(this,"rotationY",[]);c(this,"translation",new r);c(this,"translationX",0);c(this,"translationY",0);c(this,"translationZ",0);c(this,"surfaceWidth",2*Math.PI);c(this,"surfaceHeight",2*Math.PI);c(this,"surfaceStepX",.3);c(this,"surfaceStepY",.3);c(this,"surfaceInitialShiftX",0);c(this,"surfaceInitialShiftY",0);c(this,"gridCoords",[]);this.canvas=t,this.init()}addCoords(t){for(let s=1;s<t.length;s++)this.originalCoords.push(new r(Number(t[s][0]),Number(t[s][1]),Number(t[s][2])))}startUpdate(){window.requestAnimationFrame(this.update.bind(this))}init(t){const s="#000000";this.canvas.color=s,this.originalCoords=[],this.projectedCoords=[],t?(this.addCoords(t),this.startUpdate()):this.addCoordsManually(),window.addEventListener("keydown",e=>{this.keyboardEvent(e)}),this.startUpdate()}addCoordsManually(){console.log("add");for(let t=0;t<Math.ceil(this.surfaceHeight/this.surfaceStepY);t++)this.gridCoords.push([]);for(let t=this.surfaceInitialShiftX,s=0;t<this.surfaceWidth;t+=this.surfaceStepX,s+=1)for(let e=this.surfaceInitialShiftY,o=0;e<this.surfaceHeight;e+=this.surfaceStepY,o+=1){const a=this.fx(t,e),i=this.fy(t,e),n=this.fz(t,e),l=new r(a,i,n);this.originalCoords.push(l),this.gridCoords[o].push(l)}}update(t){this.updated(t),window.requestAnimationFrame(this.update.bind(this))}updated(t){this.originalCoords.length>0&&this.displayCoords2()}surfaceFunction(t,s){return Math.sin(2*s)+Math.sin(2*t)}fx(t,s){return(.5*Math.sin(t)+.4*Math.cos(s))*Math.cos(t)}fy(t,s){return(.5*Math.sin(t)+.4*Math.cos(s))*Math.sin(t)}fz(t,s){return .4*Math.sin(s)}displayCoords(){this.clearScreen(),this.updateRotation(),this.updateProjection(),this.projectedCoords=[];let t=new r(0,0,0);for(let s=0;s<this.originalCoords.length;s++){let e=this.originalCoords[s];t.add(e)}t=r.mul(t,1/this.originalCoords.length);for(let s of this.originalCoords){let e=new r(s.x,s.y,s.z);new r(this.translationX,this.translationY,this.translationZ);let o=new r(this.translationX,this.translationY,this.translationZ);e=r.add(e,r.mul(t,-1)),e=r.matMul(this.rotationX,e),e=r.matMul(this.rotationZ,e),e=r.matMul(this.rotationY,e),e=r.add(e,t),e=r.matMul(this.projection,e),e=r.add(e,o),this.projectedCoords.push(e);let a=this.convertCoords(e.x,e.y);this.canvas.setPoint(a.x,a.y)}Math.floor(this.surfaceHeight/this.surfaceStepY),Math.floor(this.surfaceWidth/this.surfaceStepX)-1}displayCoords2(){this.clearScreen(),this.updateRotation(),this.updateProjection();let t=new r(0,0,0);for(let o=0;o<this.originalCoords.length;o++){let a=this.originalCoords[o];t.add(a)}t=r.mul(t,1/this.originalCoords.length);let s=[];for(let o=0;o<this.gridCoords.length;o++)s.push([]);for(let o=0;o<this.gridCoords.length;o++)for(let a=0;a<this.gridCoords[0].length;a++){let i=this.gridCoords[o][a],n=new r(i.x,i.y,i.z);new r(this.translationX,this.translationY,this.translationZ);let l=new r(this.translationX,this.translationY,this.translationZ);n=r.add(n,r.mul(t,-1)),n=r.matMul(this.rotationX,n),n=r.matMul(this.rotationZ,n),n=r.matMul(this.rotationY,n),n=r.add(n,t),n=r.matMul(this.projection,n),n=r.add(n,l),this.projectedCoords.push(n);let d=this.convertCoords(n.x,n.y);this.canvas.setPoint(d.x,d.y),s[o].push(d)}const e=(o,a)=>o>=a?0:o;for(let o=0;o<this.gridCoords.length;o++)for(let a=0;a<this.gridCoords[0].length;a++){let i=s[o][a],n=s[e(o+1,this.gridCoords.length)][a];this.canvas.drawLine(i.x,i.y,n.x,n.y),i=s[o][a],n=s[o][e(a+1,this.gridCoords[0].length)],this.canvas.drawLine(i.x,i.y,n.x,n.y)}s=null}convertCoords(t,s){return t+=this.canvas.width/2,s+=this.canvas.height/2,new r(t,s,0)}updateRotation(){const t=this.angleX,s=this.angleY,e=this.angleZ;this.rotationZ=[],this.rotationZ.push(new r(Math.cos(e),-Math.sin(e),0)),this.rotationZ.push(new r(Math.sin(e),Math.cos(e),0)),this.rotationZ.push(new r(0,0,1)),this.rotationX=[],this.rotationX.push(new r(1,0,0)),this.rotationX.push(new r(0,Math.cos(t),-Math.sin(t))),this.rotationX.push(new r(0,Math.sin(t),Math.cos(t))),this.rotationY=[],this.rotationY.push(new r(Math.cos(s),0,Math.sin(s))),this.rotationY.push(new r(0,1,0)),this.rotationY.push(new r(-Math.sin(s),0,Math.cos(s)))}updateProjection(){const t=this.scaleX,s=this.scaleY,e=this.scaleZ;this.projection=[],this.projection.push(r.mul(new r(1,0,0),t)),this.projection.push(r.mul(new r(0,1,0),s)),this.projection.push(r.mul(new r(0,0,1),e))}keyboardEvent(t){switch(t.code){case"KeyZ":{this.angleZ+=.1,console.log("rotate z");break}case"KeyX":{this.angleX+=.1,console.log("rotate x");break}case"KeyY":{this.angleY+=.1;break}case"KeyQ":{this.translationX+=10;break}case"KeyW":{this.translationY+=10;break}case"KeyE":{this.translationZ+=10;break}case"KeyA":{this.scaleX+=1;break}case"KeyS":{this.scaleY+=1;break}case"KeyD":{this.scaleZ+=1;break}}}clearScreen(){this.canvas.clear()}clearCoords(){this.originalCoords=[],this.angleX=0,this.angleY=0,this.angleZ=0,this.translationX=0,this.translationY=0,this.translationZ=0,this.scaleX=this.canvas.width,this.scaleY=this.canvas.width,this.scaleZ=this.canvas.width,this.clearScreen()}connectProjectedDots(t,s){let e=this.projectedCoords[t],o=this.projectedCoords[s];e=this.convertCoords(e.x,e.y),o=this.convertCoords(o.x,o.y),this.canvas.drawLine(e.x,e.y,o.x,o.y)}changeScale(t,s){switch(t){case"X":{this.scaleX=this.maxScale*(s/100);break}case"Y":{this.scaleY=this.maxScale*(s/100);break}case"Z":{this.scaleZ=this.maxScale*(s/100);break}case"XYZ":this.scaleX=this.maxScale*(s/100),this.scaleY=this.maxScale*(s/100),this.scaleZ=this.maxScale*(s/100)}}saveFigure(){let t=E.unparse(this.originalCoords);D(t,"figure.csv","text/csv")}loadFigure(t){var o;const s=(o=t.target)==null?void 0:o.files[0],e=new FileReader;e.addEventListener("load",a=>{const i=a.currentTarget.result;let n=E.parse(i);n=n.data,this.addCoords(n)}),e.readAsText(s)}}const Vs={data(){return{lab5:null,lab5_2:null}},components:{},methods:{clearScreen(){this.lab5.clearCoords()},changeScale(h,t){console.log(h);const s=h.srcElement.value;this.lab5.changeScale(t,s)},saveFigure(){this.lab5.saveFigure()},loadFigure(h){this.lab5.loadFigure(h)}},mounted(){const h=this.$refs.canvas_elem,t=new y(h,600,600),s=new Ws(t);this.lab5=s}},Hs={class:"container"},Qs=u("div",{class:"p-2"},[u("h3",null,"\u041B\u0430\u0431\u043E\u0440\u0430\u0442\u043E\u0440\u043D\u0430\u044F \u21165"),u("h4",null,"\u0420\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u0438 \u0432 \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u0435."),u("ul",null,[u("li",null,"\u0430) \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u044C, \u0437\u0430\u0434\u0430\u043D\u043D\u0430\u044F \u0444\u043E\u0440\u043C\u0443\u043B\u043E\u0439. (6)"),u("li",null,"\u0431) \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u044C \u0411\u0435\u0437\u044C\u0435 (8)")])],-1),Gs=u("h1",null,"\u0430) \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u044C, \u0437\u0430\u0434\u0430\u043D\u043D\u0430\u044F \u0444\u043E\u0440\u043C\u0443\u043B\u043E\u0439. (6)",-1),Js={class:"lab_5__field"},te={class:"lab_5__canvas",ref:"canvas_elem"},se=u("h1",null,"\u0431) \u043F\u043E\u0432\u0435\u0440\u0445\u043D\u043E\u0441\u0442\u044C \u0411\u0435\u0437\u044C\u0435 (8)",-1),ee={class:"lab_5__field"},oe={class:"lab_5__canvas",ref:"canvas_elem_2"};function ae(h,t,s,e,o,a){return f(),m("div",Hs,[Qs,Gs,u("div",Js,[u("canvas",te,null,512)]),se,u("div",ee,[u("canvas",oe,null,512)])])}var ne=Y(Vs,[["render",ae]]);const ie=U({history:q("/computer_graphics/"),routes:[{path:"/",name:"home",component:it},{path:"/lab_1",component:Xt},{path:"/lab_2",component:gs},{path:"/lab_3",component:Ss},{path:"/lab_4",component:Ts},{path:"/lab_5",component:ne}]}),B=T(V);B.use(ie);B.mount("#app");
